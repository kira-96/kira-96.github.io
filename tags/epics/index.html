<!doctype html><html lang=zh dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>EPICS | âœ¨kiraã®åšå®¢</title>
<meta name=keywords content><meta name=description content="kira's blog"><meta name=author content><link rel=canonical href=https://kira-96.github.io/tags/epics/><link crossorigin=anonymous href=/assets/css/stylesheet.f89c00904f7a47c9503440b80512097f534493b767e4b5cf74c6c9bbef4dd9be.css integrity="sha256-+JwAkE96R8lQNEC4BRIJf1NEk7dn5LXPdMbJu+9N2b4=" rel="preload stylesheet" as=style><link rel=icon href=https://cdn.jsdelivr.net/gh/kira-96/kira-96.github.io@gh-pages/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://cdn.jsdelivr.net/gh/kira-96/kira-96.github.io@gh-pages/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://cdn.jsdelivr.net/gh/kira-96/kira-96.github.io@gh-pages/favicon-32x32.png><link rel=apple-touch-icon href=https://cdn.jsdelivr.net/gh/kira-96/kira-96.github.io@gh-pages/icons/apple-icon-180x180.png><link rel=mask-icon href=https://cdn.jsdelivr.net/gh/kira-96/kira-96.github.io@gh-pages/icons/apple-icon-76x76.png><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://kira-96.github.io/tags/epics/index.xml><link rel=alternate hreflang=zh href=https://kira-96.github.io/tags/epics/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><link rel=manifest href=https://cdn.jsdelivr.net/gh/kira-96/kira-96.github.io@gh-pages/manifest.json><script src=https://fastly.jsdelivr.net/gh/stevenjoezhang/live2d-widget@latest/autoload.js></script><script type=text/javascript src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><meta property="og:url" content="https://kira-96.github.io/tags/epics/"><meta property="og:site_name" content="âœ¨kiraã®åšå®¢"><meta property="og:title" content="EPICS"><meta property="og:description" content="kira's blog"><meta property="og:locale" content="zh"><meta property="og:type" content="website"><meta name=twitter:card content="summary"><meta name=twitter:title content="EPICS"><meta name=twitter:description content="kira's blog"></head><body class=list id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://kira-96.github.io/ accesskey=h title="âœ¨kiraã®åšå®¢ (Alt + H)">âœ¨kiraã®åšå®¢</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://kira-96.github.io/ title=ğŸ ä¸»é¡µ><span>ğŸ ä¸»é¡µ</span></a></li><li><a href=https://kira-96.github.io/notes/ title=ğŸ““ç¬”è®°><span>ğŸ““ç¬”è®°</span></a></li><li><a href=https://kira-96.github.io/search/ title=ğŸ”ï¸æœç´¢><span>ğŸ”ï¸æœç´¢</span></a></li><li><a href=https://kira-96.github.io/archives/ title=ğŸ—ƒï¸å­˜æ¡£><span>ğŸ—ƒï¸å­˜æ¡£</span></a></li></ul></nav></header><main class=main><header class=page-header><div class=breadcrumbs><a href=https://kira-96.github.io/>ä¸»é¡µ</a>&nbsp;Â»&nbsp;<a href=https://kira-96.github.io/tags/>Tags</a></div><h1>EPICS
<a href=/tags/epics/index.xml title=RSS aria-label=RSS><svg viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" height="23"><path d="M4 11a9 9 0 019 9"/><path d="M4 4a16 16 0 0116 16"/><circle cx="5" cy="19" r="1"/></svg></a></h1></header><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>ecmcæ„å»ºæŒ‡å—
<span class=entry-hint title=Draft><svg height="20" viewBox="0 -960 960 960" fill="currentcolor"><path d="M160-410v-60h3e2v60H160zm0-165v-60h470v60H160zm0-165v-60h470v60H160zm360 580v-123l221-220q9-9 20-13t22-4q12 0 23 4.5t20 13.5l37 37q9 9 13 20t4 22-4.5 22.5T862.09-380L643-160H520zm3e2-263-37-37 37 37zM580-220h38l121-122-18-19-19-18-122 121v38zm141-141-19-18 37 37-18-19z"/></svg></span></h2></header><div class=entry-content><p>è½¯ä»¶åŒ… epics-base/epics-base: The C/C++ core of the EPICS Base control system toolkit epics-modules/ecmc: EPICS Support for EtherCAT Motion Controller (ECMC) and Generic IO Controller paulscherrerinstitute/exprtk-ecmc: ESS Customized exprtk : C++ Mathematical Expression Parsing And Evaluation Library epics-modules/asyn: EPICS module for driver and device support EuropeanSpallationSource/motor: APS BCDA synApps module: motor pantor/ruckig: Motion Generation for Robots and Machines. EtherLab / EtherCAT Master Â· GitLab æ„å»ºé¡ºåº epics-base asyn motor etherlab ruckig ecmc epics-base æ­£å¸¸äº¤å‰ç¼–è¯‘ã€‚
...</p></div><footer class=entry-footer><span title='2024-11-26 08:56:34 +0800 +0800'>åä¸€æœˆ 26, 2024</span>&nbsp;Â·&nbsp;5 åˆ†é’Ÿ&nbsp;Â·&nbsp;1028 å­—</footer><a class=entry-link aria-label="post link to ecmcæ„å»ºæŒ‡å—" href=https://kira-96.github.io/notes/ecmc%E6%9E%84%E5%BB%BA%E6%8C%87%E5%8D%97/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>EPICS IOC è®¿é—®å®‰å…¨</h2></header><div class=entry-content><p>åŸæ–‡ï¼šIOC Access Security
åŠŸèƒ½ è®¿é—®å®‰å…¨åŠŸèƒ½ç”¨äºä¿æŠ¤IOCæ•°æ®åº“ï¼Œé™åˆ¶æ¥è‡ªæœªç»æˆæƒçš„CAæˆ–pvAccesså®¢æˆ·ç«¯è®¿é—®ã€‚è®¿é—®å®‰å…¨æ€§åŸºäºä»¥ä¸‹å‡ ç‚¹ï¼š
Who å®¢æˆ·ç«¯çš„ç”¨æˆ·IDï¼ˆChannel Access/pvAccessï¼‰ã€‚
Where ç”¨æˆ·ç™»å½•çš„ä¸»æœº IDã€‚å®¢æˆ·ç«¯è¿è¡Œçš„ä¸»æœºï¼Œä½†ä¸ä¼šåˆ†è¾¨ç”¨æˆ·æ˜¯æœ¬åœ°ç”¨æˆ·æˆ–è¿œç¨‹ç™»å½•åˆ°ä¸»æœºçš„ç”¨æˆ·ã€‚
What è®°å½•çš„å„ä¸ªå­—æ®µéƒ½å—åˆ°ä¿æŠ¤ã€‚æ¯æ¡è®°å½•éƒ½æœ‰ä¸€ä¸ªå­—æ®µåŒ…å«è®°å½•çš„è®¿é—®å®‰å…¨ç»„ï¼ˆASGï¼‰ã€‚æ¯ä¸ªå­—æ®µéƒ½æœ‰ä¸€ä¸ªè®¿é—®å®‰å…¨çº§åˆ«ï¼ˆASL0æˆ–ASL1ï¼‰ã€‚å®‰å…¨çº§åˆ«åœ¨è®°å½•å®šä¹‰æ–‡ä»¶ï¼ˆ.dbdï¼‰ä¸­å®šä¹‰ã€‚
When è®¿é—®è§„åˆ™å¯ä»¥åŒ…å«ç±»ä¼¼äºCALC Recordçš„è¾“å…¥è®¡ç®—ã€‚
å®šä¹‰ ASL è®¿é—®å®‰å…¨çº§åˆ«
ASG è®¿é—®å®‰å…¨ç»„
UAG ç”¨æˆ·è®¿é—®ç»„
HAG ä¸»æœºè®¿é—®ç»„
å¿«é€Ÿä¸Šæ‰‹ ä¸ºäº†å¯ç”¨ç‰¹å®š IOC çš„è®¿é—®å®‰å…¨æ€§ï¼Œéœ€è¦å®Œæˆä»¥ä¸‹æ“ä½œï¼š
åˆ›å»ºè®¿é—®å®‰å…¨æ–‡ä»¶ï¼ˆ.acfï¼‰ å¯èƒ½éœ€è¦ä¿®æ”¹IOCæ•°æ®åº“ è®°å½•å®ä¾‹å¯èƒ½éœ€è¦è®¾ç½®è®¿é—®å®‰å…¨ç»„ASGå­—æ®µã€‚å¦‚æœASGä¸ºç©ºï¼Œè®°å½•å°†ä¼šä½¿ç”¨â€œDEFAULTâ€è®¿é—®å®‰å…¨ç»„ã€‚
è®¿é—®å®‰å…¨æ–‡ä»¶å¯ä»¥åœ¨iocInitä¹‹åé€šè¿‡asSubInitå’ŒasSubProcessä½œä¸ºå…³è”çš„å­ç¨‹åºé‡æ–°åŠ è½½ã€‚å°†å€¼1å†™å…¥æ­¤è®°å½•å°†å¯¼è‡´é‡æ–°åŠ è½½ã€‚
å¿…é¡»å¯åŠ¨è„šæœ¬åœ¨çš„iocInitä¹‹å‰åŒ…å«ä»¥ä¸‹å‘½ä»¤ï¼š
1 2 3 4 asSetFilename("/full/path/to/accessSecurityFile") /* ä¸‹é¢æ˜¯ä¸€ä¸ªå¯é€‰å‘½ä»¤ */ /* ä½¿ç”¨å®æ›¿æ¢ */ asSetSubstitutions("var1=sub1,var2=sub2,...") å¦‚æœåœ¨iocInitä¹‹å‰æœªæ‰§è¡ŒasSetFilenameï¼Œå°±ä¸ä¼šå¯ç”¨è®¿é—®å®‰å…¨é™åˆ¶ã€‚
å¦‚æœç»™å®šasSetFilenameï¼Œä½†åœ¨é¦–æ¬¡åˆå§‹åŒ–è®¿é—®å®‰å…¨æ€§æ—¶å‘ç”Ÿé”™è¯¯ï¼Œåˆ™å¯¹è¯¥IOCçš„æ‰€æœ‰è®¿é—®éƒ½ä¼šè¢«æ‹’ç»ã€‚
æˆåŠŸå¯åŠ¨è®¿é—®å®‰å…¨æ€§åï¼Œå°è¯•é‡æ–°å¯åŠ¨æ—¶å‡ºç°é”™è¯¯ï¼Œå°†ä¼šä¿æŒä¸Šæ¬¡çš„è®¿é—®å®‰å…¨é…ç½®ã€‚
å¯åŠ¨IOCå¹¶å¯ç”¨è®¿é—®å®‰å…¨åï¼Œå¯ä»¥é€šè¿‡asSetFilenameã€asSetSubstitutionså’ŒasInitæ¥æ›´æ”¹è®¿é—®å®‰å…¨è§„åˆ™ã€‚ä¹Ÿå¯ä»¥ä½¿ç”¨å‡½æ•°asInitializeã€asInitFileå’ŒasInitFPã€‚
åœ¨å¯åŠ¨IOCä¹‹åé‡æ–°åˆå§‹åŒ–è®¿é—®å®‰å…¨é…ç½®æ“ä½œæ˜¯â€œéå¸¸æ˜‚è´µâ€çš„æ“ä½œï¼Œå°½é‡ä¸è¦è¿™æ ·åšã€‚
è®¿é—®å®‰å…¨é…ç½®æ–‡ä»¶ æœ¬èŠ‚ä»‹ç»åŒ…å«ç”¨æˆ·è®¿é—®ç»„ï¼ˆUAGï¼‰ã€ä¸»æœºè®¿é—®ç»„ï¼ˆHAGï¼‰å’Œè®¿é—®å®‰å…¨ç»„ï¼ˆASGï¼‰ã€‚IOCä¼šè¯»å–è®¿é—®é…ç½®æ–‡ä»¶ï¼ˆå»ºè®®ä½¿ç”¨æ‰©å±•å.acfï¼‰ç„¶ååˆ›å»ºè®¿é—®é…ç½®æ•°æ®åº“ã€‚é¦–å…ˆç»™å‡ºä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼Œç„¶åæ˜¯å®Œæ•´çš„è¯­æ³•æè¿°ã€‚
ç®€å•ç¤ºä¾‹
1 2 3 4 5 6 7 8 9 UAG(uag) {user1,user2} HAG(hag) {host1,host2} ASG(DEFAULT) { RULE(1,READ) RULE(1,WRITE) { UAG(uag) HAG(hag) } } ä¸Šé¢çš„è§„åˆ™æä¾›äº†æ— é™åˆ¶çš„è¯»æƒé™ï¼ˆREADï¼‰ï¼Œè€Œä½äºä¸»æœºhost1å’Œhost2ä¸Šçš„ç”¨æˆ·user1å’Œuser2åˆ™æ‹¥æœ‰å†™æƒé™ï¼ˆWRITEï¼‰ã€‚
...</p></div><footer class=entry-footer><span title='2024-03-18 09:52:05 +0800 +0800'>ä¸‰æœˆ 18, 2024</span>&nbsp;Â·&nbsp;3 åˆ†é’Ÿ&nbsp;Â·&nbsp;580 å­—</footer><a class=entry-link aria-label="post link to EPICS IOC è®¿é—®å®‰å…¨" href=https://kira-96.github.io/posts/epics-ioc-access-security/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>é¾™èŠ¯å¼€å‘æ¿ç§»æ¤ IgH EtherCAT Master</h2></header><div class=entry-content><p>å‰è¨€ IgH EtherCAT Master æ˜¯ä¸€ä¸ªå¼€æºçš„EtherCATä¸»ç«™é©±åŠ¨ç¨‹åºï¼Œç”¨äºç®¡ç†EtherCATä»ç«™è®¾å¤‡ï¼Œæ”¯æŒLinuxæ“ä½œç³»ç»Ÿï¼Œå·¥æ§ä¸Šä½¿ç”¨çš„æ¯”è¾ƒå¤šã€‚
dls ethercatæ˜¯ç”±è‹±å›½é’»çŸ³å…‰æºå¼€å‘çš„ç”¨äº EPICS æ§åˆ¶ç³»ç»Ÿ EtherCAT è®¾å¤‡çš„æ”¯æŒç¨‹åºï¼ŒåŸºäº IgH Master ä¸»ç«™ç¨‹åºå¼€å‘ï¼Œå®ç°å¯¹ EtherCAT æ€»çº¿è®¾å¤‡çš„è¯»å†™ã€‚
äº¤å‰ç¼–è¯‘ç¯å¢ƒï¼šUbuntu
è¿è¡Œå¼€å‘æ¿ï¼šé¾™èŠ¯2K0500é‡‘é¾™å¼€å‘æ¿
å†…æ ¸ç‰ˆæœ¬ï¼šLinux LS-GD 5.10.0-rt17.lsgd #1 PREEMPT_RT
ç›¸å…³è½¯ä»¶åŒ…ä¸‹è½½åœ°å€ epics-base - (launchpad.net) / epics-base/epics-base / EPICS Base (anl.gov)
epics-modules/asyn: EPICS module for driver and device support
epics-modules/busy: APS BCDA synApps module: busy
epics-modules/autosave: APS BCDA synApps module: autosave
dls-controls/ethercat: EPICS support to read/write to ethercat based hardware
IgH EtherCAT Master for Linux
PREEMPT RT patch
é…ç½®äº¤å‰ç¼–è¯‘ç¯å¢ƒ å…³äºè¿™ä¸€èŠ‚ï¼Œä¹‹å‰çš„æ–‡ç« å·²ç»è¯¦ç»†è®²è¿‡ï¼Œå‚è€ƒé…ç½®äº¤å‰ç¼–è¯‘ç¯å¢ƒã€‚
...</p></div><footer class=entry-footer><span title='2024-02-23 12:54:31 +0800 +0800'>äºŒæœˆ 23, 2024</span>&nbsp;Â·&nbsp;14 åˆ†é’Ÿ&nbsp;Â·&nbsp;2773 å­—</footer><a class=entry-link aria-label="post link to é¾™èŠ¯å¼€å‘æ¿ç§»æ¤ IgH EtherCAT Master" href=https://kira-96.github.io/posts/%E9%BE%99%E8%8A%AF%E5%BC%80%E5%8F%91%E6%9D%BF%E7%A7%BB%E6%A4%8Digh-ethercat-master/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>EPICSçš„MODBUSæ¨¡å—çš„ç¼–è¯‘å’Œä½¿ç”¨</h2></header><div class=entry-content><p>å‰è¨€ MODBUSæ˜¯ä¸€ç§åº”ç”¨å±‚æ¶ˆæ¯ä¼ é€’åè®®ï¼Œé€šå¸¸ç”¨äº I/O ç³»ç»Ÿé€šä¿¡å’Œå¯ç¼–ç¨‹é€»è¾‘æ§åˆ¶å™¨ï¼ˆPLCï¼‰é€šä¿¡ã€‚
é“¾æ¥ç±»å‹ æè¿° MODBUS TCP TCP/IP ä½¿ç”¨502ç«¯å£ MODBUS RTU RTUé€šå¸¸é€šè¿‡ä¸²è¡Œé€šä¿¡é“¾è·¯è¿è¡Œï¼Œå³RS-232ã€ RS-422 æˆ– RS-485ã€‚RTU ä½¿ç”¨é¢å¤–çš„ CRC è¿›è¡Œæ•°æ®åŒ…æ£€æŸ¥ã€‚åè®®ç›´æ¥å°†æ¯ä¸ªå­—èŠ‚ä½œä¸º 8 ä¸ªæ•°æ®ä½ä¼ è¾“ï¼Œå› æ­¤ä½¿ç”¨â€œäºŒè¿›åˆ¶â€ è€Œä¸æ˜¯ ASCII ç¼–ç ã€‚ä½¿ç”¨ä¸²è¡Œé“¾è·¯å¼€å§‹å’Œç»“æŸæ—¶ï¼Œæ¶ˆæ¯å¸§æ˜¯æŒ‰æ—¶é—´è€Œä¸æ˜¯æŒ‰ç‰¹å®šå­—ç¬¦æ£€æµ‹çš„ã€‚ MODBUS ASCII ä¸²è¡Œåè®®ï¼Œé€šå¸¸åœ¨ä¸²è¡Œé€šä¿¡é“¾è·¯ä¸Šè¿è¡Œï¼Œå³ RS-232ã€RS-422 æˆ– RS-485ã€‚ä¸²è¡Œ ASCII ä½¿ç”¨é¢å¤–çš„ LRC æ•°æ®åŒ…æ£€æŸ¥ã€‚è¯¥åè®®å°†æ¯ä¸ªå­—èŠ‚ç¼–ç ä¸º 2 ä¸ª ASCII å­—ç¬¦ã€‚æ¶ˆæ¯å¸§çš„å¼€å§‹å’Œç»“æŸç”±ç‰¹å®šå­—ç¬¦æ£€æµ‹ ï¼ˆâ€œ:â€ å¼€å§‹æ¶ˆæ¯ï¼ŒCR/LF ç»“æŸæ¶ˆæ¯ï¼‰ã€‚è¯¥åè®®æ•ˆç‡ä½äº Modbus RTUï¼Œä½†åœ¨æŸäº›ç¯å¢ƒä¸­å¯èƒ½æ›´å¯é ã€‚ Modbus æä¾›å¯¹ä»¥ä¸‹ 4 ç§ç±»å‹çš„æ•°æ®çš„è®¿é—®ï¼š
ä¸»è¡¨ å¯¹è±¡ç±»å‹ è®¿é—® è¯´æ˜ ç¦»æ•£è¾“å…¥ 1bit åªè¯» è¿™ç§ç±»å‹çš„æ•°æ®å¯ä»¥ç”± I/O ç³»ç»Ÿæä¾›ã€‚ çº¿åœˆ 1bit è¯»å†™ æ­¤ç±»æ•°æ®å¯ç”±åº”ç”¨ç¨‹åºæ›´æ”¹ã€‚ è¾“å…¥å¯„å­˜å™¨ 16ä½å­—(2å­—èŠ‚) åªè¯» è¿™ç§ç±»å‹çš„æ•°æ®å¯ä»¥ç”± I/O ç³»ç»Ÿæä¾›ã€‚ ä¿æŒå¯„å­˜å™¨ 16ä½å­—(2å­—èŠ‚) è¯»å†™ æ­¤ç±»æ•°æ®å¯ç”±åº”ç”¨ç¨‹åºæ›´æ”¹ã€‚ Modbus é€šä¿¡ç”±ä» Modbus å®¢æˆ·ç«¯å‘é€åˆ° Modbus æœåŠ¡å™¨çš„è¯·æ±‚æ¶ˆæ¯ç»„æˆã€‚æœåŠ¡å™¨ä½¿ç”¨å“åº”æ¶ˆæ¯è¿›è¡Œå›å¤ã€‚Modbus è¯·æ±‚æ¶ˆæ¯åŒ…å«ï¼š
...</p></div><footer class=entry-footer><span title='2024-01-02 14:38:38 +0800 +0800'>ä¸€æœˆ 2, 2024</span>&nbsp;Â·&nbsp;6 åˆ†é’Ÿ&nbsp;Â·&nbsp;1276 å­—</footer><a class=entry-link aria-label="post link to EPICSçš„MODBUSæ¨¡å—çš„ç¼–è¯‘å’Œä½¿ç”¨" href=https://kira-96.github.io/posts/build-epics-module-modbus/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>äº¤å‰ç¼–è¯‘ ACAI
<span class=entry-hint title=Draft><svg height="20" viewBox="0 -960 960 960" fill="currentcolor"><path d="M160-410v-60h3e2v60H160zm0-165v-60h470v60H160zm0-165v-60h470v60H160zm360 580v-123l221-220q9-9 20-13t22-4q12 0 23 4.5t20 13.5l37 37q9 9 13 20t4 22-4.5 22.5T862.09-380L643-160H520zm3e2-263-37-37 37 37zM580-220h38l121-122-18-19-19-18-122 121v38zm141-141-19-18 37 37-18-19z"/></svg></span></h2></header><div class=entry-content><p>å…³äº ACAI ACAI æ˜¯ä¸€ä¸ªC++å°è£…çš„Channel Accessåè®®åº”ç”¨å¼€å‘æ¥å£ï¼ˆAPIï¼‰ï¼Œæä¾›å¼‚æ­¥é€šé“è®¿é—®æ¥å£ã€‚
ACAI Channel Access Interface
EPICS Qtä¾èµ–ACAIæä¾›çš„Channel Accessæ¥å£ã€‚
å‰ç½®æ­¥éª¤ è¿™ç¯‡ç¬”è®°æ˜¯äº¤å‰ç¼–è¯‘EPICSå’ŒIOCå†…å®¹çš„è¡¥å……ã€‚
åœ¨è¿›è¡Œä¸‹é¢æ­¥éª¤å‰ï¼Œè¯·å®Œæˆé…ç½®äº¤å‰ç¼–è¯‘ç¯å¢ƒå’Œç¼–è¯‘ EPICS Baseã€‚
è¿™é‡Œä¾æ—§ä»¥é¾™èŠ¯æ¶æ„ä¸ºä¾‹ã€‚
EPICS base ç¼–è¯‘å®Œæˆåï¼Œå¯ä»¥çœ‹åˆ°binç›®å½•ä¸‹æœ‰linux-loong64ã€linux-x86_64ä¸¤ä¸ªç›®å½•ï¼Œlinux-x86_64ç›®å½•ä¸‹æ¯”linux-loong64ç›®å½•å¤šå‡ºäº†è®¸å¤šperlè„šæœ¬ï¼Œæˆ‘ä»¬éœ€è¦æŠŠè¿™äº›è„šæœ¬å¤åˆ¶åˆ°é¾™æ¶æ„çš„ç›®å½•ä¸‹ï¼Œä¸‹é¢ç¼–è¯‘éœ€è¦ç”¨åˆ°ã€‚
1 $ cp ./bin/linux-x86_64/*.pl ./bin/linux-loong64/ ç¼–è¯‘ åœ¨EPICS-Qtå®‰è£…ä¸­å·²ç»ä»‹ç»è¿‡ç¼–è¯‘ACAIã€‚è¿™æ¬¡æ˜¯ä½¿ç”¨äº¤å‰ç¼–è¯‘æ–¹å¼ï¼Œæ­¥éª¤ç•¥æœ‰ä¸åŒã€‚
1 2 3 4 5 6 7 8 9 10 11 12 13 cd ~/loongson/ git clone https://github.com/andrewstarritt/acai.git cd acai vi configure/RELEASE.local # ä¿®æ”¹äº¤å‰ç¼–è¯‘çš„ç›®æ ‡æ¶æ„ï¼Œå’ŒEPICS baseä¸­ä¿æŒä¸€è‡´ # EPICS_HOST_ARCH=linux-loong64 # ä¿®æ”¹EPICS_BASEè·¯å¾„ï¼Œä¾‹ï¼š EPICS_BASE=/home/ubuntu/loongson/base-7.0.8 # make LD=loongarch64-linux-gnu-ld CC=loongarch64-linux-gnu-gcc CCC=loongarch64-linux-gnu-g++ make # ç­‰å¾…ç¼–è¯‘å®Œæˆ ç¼–è¯‘å®Œæˆåå¯ä»¥åœ¨lib/linux-loong64/ç›®å½•ä¸‹æ‰¾åˆ°libacai.soã€‚
...</p></div><footer class=entry-footer><span title='2023-12-26 19:31:56 +0800 +0800'>åäºŒæœˆ 26, 2023</span>&nbsp;Â·&nbsp;1 åˆ†é’Ÿ&nbsp;Â·&nbsp;67 å­—</footer><a class=entry-link aria-label="post link to äº¤å‰ç¼–è¯‘ ACAI" href=https://kira-96.github.io/notes/cross-compiling-acai/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>äº¤å‰ç¼–è¯‘EPICSå’ŒIOC</h2></header><div class=entry-content><p>å‰è¨€ ä¹‹å‰å·²ç»è®²è¿‡åœ¨é¾™èŠ¯3A5000(loongarch64)ä¸Šç¼–è¯‘è¿è¡ŒEPICSï¼Œä¸è¿‡è¿™ç§æƒ…å†µåªé€‚ç”¨äºæœ‰å®Œæ•´å¼€å‘ç¯å¢ƒçš„æƒ…å†µä¸‹è¿›è¡Œç¼–è¯‘ã€‚ä¸€äº›æ—¶å€™ï¼Œæˆ‘ä»¬åªæœ‰ç¼–è¯‘å™¨ï¼Œè€Œç¼ºå°‘makeï¼Œperlç­‰å·¥å…·ï¼Œæ¯”å¦‚ä¸€äº›å¼€å‘æ¿å‚å•†æä¾›çš„å¼€å‘å¥—ä»¶ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œå°±éœ€è¦é€šè¿‡äº¤å‰ç¼–è¯‘(cross-compiling)çš„æ–¹å¼æ¥ç¼–è¯‘EPICSã€‚
è¿™é‡Œä»¥é¾™èŠ¯é‡‘é¾™2K500å…ˆé”‹å¼€å‘æ¿ä¸ºä¾‹ï¼Œæˆ‘ä»¬ä½¿ç”¨Ubuntu-20.04ä½œä¸ºæ„å»ºç³»ç»Ÿï¼Œè¯¦ç»†è®²è§£å¦‚ä½•æ„å»ºå‡ºå¯ä»¥åœ¨å¼€å‘æ¿ä¸Šè¿è¡Œçš„EPICSå·¥å…·åŒ…ï¼Œå¹¶éƒ¨ç½²åœ¨å¼€å‘æ¿ä¸Šã€‚
ç”±äºå¼€å‘æ¿ä¸Šæ²¡æœ‰å¼€å‘ç¯å¢ƒï¼Œå³ä½¿ç¼–è¯‘å‡ºç›®æ ‡å¹³å°çš„EPICS Baseï¼Œæˆ‘ä»¬ä¾ç„¶ä¸èƒ½ç›´æ¥åœ¨å¼€å‘æ¿ä¸Šåˆ›å»ºå’Œç¼–è¯‘IOCã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬è¿˜æ˜¯ä½¿ç”¨Ubuntu-20.04ä½œä¸ºæ„å»ºç³»ç»Ÿï¼Œåˆ›å»ºå¹¶ç¼–è¯‘IOCï¼Œæœ€ååœ¨å¼€å‘æ¿ä¸Šè¿è¡Œã€‚
é…ç½®äº¤å‰ç¼–è¯‘ç¯å¢ƒ å…³äºè¿™ä¸€èŠ‚ï¼Œä¹‹å‰çš„æ–‡ç« å·²ç»è¯¦ç»†è®²è¿‡ï¼Œå‚è€ƒé…ç½®äº¤å‰ç¼–è¯‘ç¯å¢ƒã€‚
å¦‚æœä½ ä½¿ç”¨çš„æ˜¯å…¶ä»–å¼€å‘å¥—ä»¶ï¼Œè¯·æŒ‰ç…§å¼€å‘æ‰‹å†Œå®‰è£…é…ç½®å¥½ç¯å¢ƒã€‚
ç¼–è¯‘ EPICS Base é¦–å…ˆï¼Œä¸‹è½½ã€è§£å‹Baseï¼Œå‚è€ƒä»¥å‰çš„æ–‡ç« ã€‚
åœ¨é¾™èŠ¯3A5000(loongarch64)ä¸Šç¼–è¯‘è¿è¡ŒEPICSä¸­æˆ‘å·²ç»è¯¦ç»†è®²è§£äº†å¦‚ä½•åœ¨é¾™æ¶æ„ä¸Šç¼–è¯‘EPICSï¼Œè¿™æ¬¡ï¼Œéœ€è¦åœ¨åŸæ¥å¯¹æºç ä¿®æ”¹çš„åŸºç¡€ä¸Šï¼Œå†å¢åŠ å¯¹äº¤å‰ç¼–è¯‘çš„æ”¯æŒã€‚
æ·»åŠ configure/os/CONFIG.linux-x86_64.linux-loong64
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 # CONFIG.linux-x86_64.linux-loong64 # # Definitions for linux-x86_64 host - linux-loong64 target builds # Sites may override these in CONFIG_SITE.linux-x86_64.linux-loong64 #------------------------------------------------------- VALID_BUILDS = Ioc Command GNU_TARGET = loongarch64-linux-gnu # prefix of compiler tools CMPLR_SUFFIX = CMPLR_PREFIX = $(addsuffix -,$(GNU_TARGET)) # Provide a link-time path for readline if needed OP_SYS_INCLUDES += $(READLINE_DIR:%=-I%/include) READLINE_LDFLAGS = $(READLINE_DIR:%=-L%/lib) RUNTIME_LDFLAGS_READLINE_YES_NO = $(READLINE_DIR:%=-Wl,-rpath,%/lib) RUNTIME_LDFLAGS += \ $(RUNTIME_LDFLAGS_READLINE_$(LINKER_USE_RPATH)_$(STATIC_BUILD)) SHRLIBDIR_LDFLAGS += $(READLINE_LDFLAGS) PRODDIR_LDFLAGS += $(READLINE_LDFLAGS) # Library flags STATIC_LDFLAGS_YES= -Wl,-Bstatic STATIC_LDFLAGS_NO= STATIC_LDLIBS_YES= -Wl,-Bdynamic STATIC_LDLIBS_NO= æ·»åŠ configure/os/CONFIG_SITE.linux-x86_64.linux-loong64
...</p></div><footer class=entry-footer><span title='2023-12-12 16:26:35 +0800 +0800'>åäºŒæœˆ 12, 2023</span>&nbsp;Â·&nbsp;4 åˆ†é’Ÿ&nbsp;Â·&nbsp;712 å­—</footer><a class=entry-link aria-label="post link to äº¤å‰ç¼–è¯‘EPICSå’ŒIOC" href=https://kira-96.github.io/posts/%E4%BA%A4%E5%8F%89%E7%BC%96%E8%AF%91epics%E5%92%8Cioc/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>Windowsä¸Šä½¿ç”¨MinGWç¼–è¯‘å®‰è£…EPICS
<span class=entry-hint title=Draft><svg height="20" viewBox="0 -960 960 960" fill="currentcolor"><path d="M160-410v-60h3e2v60H160zm0-165v-60h470v60H160zm0-165v-60h470v60H160zm360 580v-123l221-220q9-9 20-13t22-4q12 0 23 4.5t20 13.5l37 37q9 9 13 20t4 22-4.5 22.5T862.09-380L643-160H520zm3e2-263-37-37 37 37zM580-220h38l121-122-18-19-19-18-122 121v38zm141-141-19-18 37 37-18-19z"/></svg></span></h2></header><div class=entry-content><p>éœ€è¦ä½¿ç”¨çš„è½¯ä»¶ Strawberry Perl for Windows EPICS Base ç¼–è¯‘Baseéœ€è¦æœ‰gccã€g++ã€makeã€perlè¿™äº›å·¥å…·ï¼Œä½†å…¶å®æˆ‘ä»¬åªéœ€è¦å®‰è£…Strawberry Perlå°±å¯ä»¥äº†ï¼Œå®‰è£…å®Œæˆåå°±æœ‰äº†MinGWçš„ç¼–è¯‘ç¯å¢ƒï¼Œè¶³å¤Ÿç¼–è¯‘å®‰è£…EPICSäº†ã€‚
è¿™é‡Œä½¿ç”¨MinGWç¯å¢ƒç¼–è¯‘EPICSï¼Œä¸ä½¿ç”¨MSVCç¼–è¯‘å™¨ã€‚
å®‰è£… Strawberry Perl è¿™é‡Œé€‰æ‹© Strawberry Perl 5.38.2.1ã€‚
ç›´æ¥å®‰è£…å³å¯ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå®‰è£…è·¯å¾„ä¸èƒ½æœ‰ç©ºæ ¼å’Œä¸­æ–‡ï¼Œæœ€å¥½æ”¾åœ¨ç›˜ç¬¦çš„æ ¹ç›®å½•ä¸‹ã€‚
ä¾‹ï¼šD:\Strawberry
å®‰è£…å®Œæˆåæ£€æŸ¥ç³»ç»Ÿç¯å¢ƒå˜é‡ï¼ŒæŸ¥çœ‹ç³»ç»ŸPathç¯å¢ƒå˜é‡æ˜¯å¦æœ‰Strawberry Perlçš„è·¯å¾„ã€‚æ²¡æœ‰åˆ™æ‰‹åŠ¨æ·»åŠ ï¼Œä»¥å®‰è£…åœ¨Dç›˜ä¸ºä¾‹ã€‚
1 2 3 D:\Strawberry\c\bin D:\Strawberry\perl\site\bin D:\Strawberry\perl\bin å…¶ä¸­D:\Strawberry\c\binå°±æ˜¯MinGWç¯å¢ƒçš„è·¯å¾„ã€‚
æŸ¥çœ‹Perlç‰ˆæœ¬ï¼Œæ£€æŸ¥ä¸€ä¸‹æ˜¯ä¸æ˜¯è£…å¥½äº†ã€‚
1 2 3 4 5 6 7 8 9 10 11 12 > perl -v This is perl 5, version 38, subversion 2 (v5.38.2) built for MSWin32-x64-multi-thread Copyright 1987-2023, Larry Wall Perl may be copied only under the terms of either the Artistic License or the GNU General Public License, which may be found in the Perl 5 source kit. Complete documentation for Perl, including FAQ lists, should be found on this system using "man perl" or "perldoc perl". If you have access to the Internet, point your browser at https://www.perl.org/, the Perl Home Page. æ³¨æ„ï¼šperl 5.32.1.1 ä¹‹åçš„ç‰ˆæœ¬å¯èƒ½ä¼šæç¤º
...</p></div><footer class=entry-footer><span title='2023-11-29 18:57:02 +0800 +0800'>åä¸€æœˆ 29, 2023</span>&nbsp;Â·&nbsp;2 åˆ†é’Ÿ&nbsp;Â·&nbsp;304 å­—</footer><a class=entry-link aria-label="post link to Windowsä¸Šä½¿ç”¨MinGWç¼–è¯‘å®‰è£…EPICS" href=https://kira-96.github.io/notes/windows%E4%B8%8A%E4%BD%BF%E7%94%A8mingw%E7%BC%96%E8%AF%91%E5%AE%89%E8%A3%85epics/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>EPICS Qtå®‰è£…</h2></header><div class=entry-content><p>å‰è¨€ æœ¬æ–‡ä¸»è¦è®°å½•äº†EPICS Qtåœ¨Linuxä¸Šçš„å®‰è£…æ­¥éª¤ã€‚è¿™é‡Œä»¥loongnixæ“ä½œç³»ç»Ÿä¸ºä¾‹ï¼ŒUbuntuç³»ç»Ÿä¸Šç¼–è¯‘å®‰è£…æ­¥éª¤ç±»ä¼¼ã€‚
EPICS Qtæ˜¯ä¸€ä¸ªåŸºäºQtçš„åˆ†å±‚æ¡†æ¶ï¼Œä½¿ç”¨Channel Access ï¼ˆCAï¼‰ and PV Accessï¼ˆPVAï¼‰è®¿é—®EPICSæ•°æ®ã€‚å®ƒæ˜¯ä¸ºå¿«é€Ÿå¼€å‘æ§åˆ¶ç³»ç»Ÿå›¾å½¢ç•Œé¢è€Œè®¾è®¡çš„ï¼Œæœ€åˆæ˜¯åœ¨æ¾³å¤§åˆ©äºšåŒæ­¥åŠ é€Ÿå™¨å¼€å‘çš„ã€‚
å®‰è£…EPICS è¿™é‡Œä¸å†å†™å…·ä½“æ­¥éª¤äº†ï¼Œæ€»ä¹‹å°±æ˜¯éå¸¸ç®€å•ï¼Œä¸‹è½½ã€è§£å‹ã€ç¼–è¯‘å³å¯ã€‚å…·ä½“æ­¥éª¤å¯ä»¥å‚è€ƒä»¥å‰çš„æ–‡ç« ã€‚
å®‰è£…Qt ç›´æ¥ä½¿ç”¨ç»ˆç«¯å®‰è£…Qt
1 2 3 4 5 sudo apt update sudo apt install qtbase5-dev qt5-qmake qtcreator sudo apt install qtdeclarative5-dev qttools5-dev # å®‰è£…Qt Svgåº“ï¼Œç¼–è¯‘QWTæ—¶éœ€è¦ç”¨åˆ° sudo apt install libqt5svg5-dev å®‰è£…QWT Qt EPICSæ¨èä½¿ç”¨Qwt 6.1.4ï¼Œå¦‚æœåœ¨Ubuntu 20.04ä¸Šç›´æ¥é€šè¿‡ç»ˆç«¯å®‰è£…ä¹Ÿæ˜¯è¿™ä¸ªç‰ˆæœ¬ã€‚æˆ‘ä½¿ç”¨Qwt 6.2.0ç¼–è¯‘ï¼Œä¹Ÿæ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼Œè¿™é‡Œä»¥Qwt 6.2.0ä¸ºä¾‹ã€‚
æœ€æ–°æµ‹è¯•ï¼šQwt 6.3.0ä¹Ÿå¯ä»¥ç”¨ ~
å…ˆä¸‹è½½Qwtçš„æºç  ä¸‹è½½Qwt-6.2.0ã€‚ ä¸‹è½½å®Œæˆåè§£å‹
1 2 3 4 # è§£å‹tar.bz2 tar -jxvf qwt-6.2.0.tar.bz2 # è§£å‹zip unzip qwt-6.2.0.zip è§£å‹å®Œæˆåç¼–è¯‘Qwtï¼Œä½¿ç”¨QtCreatoræˆ–è€…åœ¨ç»ˆç«¯ä½¿ç”¨qmakeéƒ½å¯ä»¥ã€‚
ç„¶åæ‰‹åŠ¨å°†ç¼–è¯‘ç”Ÿæˆçš„æ–‡ä»¶å¤åˆ¶åˆ°ä»¥ä¸‹ä½ç½®ï¼Œä¾‹ï¼š
1 2 3 4 5 6 7 # å¤åˆ¶ç¼–è¯‘ç”Ÿæˆçš„qwt sudo cp -r build-qwt-unknown-Release/lib/* /usr/lib/loongarch64-linux-gnu/ # å¤åˆ¶ç¼–è¯‘ç”Ÿæˆçš„designeræ’ä»¶ sudo cp build-qwt-unknown-Release/designer/plugins/designer/libqwt_designer_plugin.so /usr/lib/loongarch64-linux-gnu/qt5/plugins/designer/ # å¤åˆ¶qwtå¤´æ–‡ä»¶ sudo mkdir /usr/include/qwt sudo cp qwt-6.2.0/src/*.h /usr/include/qwt å®‰è£…ACAI ACAI Channel Access Interface
...</p></div><footer class=entry-footer><span title='2023-05-04 15:06:56 +0800 +0800'>äº”æœˆ 4, 2023</span>&nbsp;Â·&nbsp;2 åˆ†é’Ÿ&nbsp;Â·&nbsp;350 å­—</footer><a class=entry-link aria-label="post link to EPICS Qtå®‰è£…" href=https://kira-96.github.io/posts/epics-qt%E5%AE%89%E8%A3%85/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>é¾™èŠ¯3A5000(LoongArch64)ä¸Šç¼–è¯‘è¿è¡ŒEPICS</h2></header><div class=entry-content><p>å‰è¨€ ä¹‹å‰å°è¯•è¿‡åœ¨é¾™èŠ¯3A4000ä¸Šç¼–è¯‘è¿è¡ŒEPICSï¼Œç”±äº3A4000è¿˜æ˜¯mips64æŒ‡ä»¤é›†ï¼Œè€Œ3A5000åˆ™æ˜¯é¾™èŠ¯çš„è‡ªä¸»æŒ‡ä»¤é›†loongarch64ï¼Œé€‚é…èµ·æ¥æ­¥éª¤ä¹Ÿä¼šæœ‰æ‰€ä¸åŒã€‚
è¿™æ¬¡ä½¿ç”¨çš„æ˜¯é¾™åšç‰¹é¾™èŠ¯3A5000ç”µè„‘ä¸»æœºã€‚
è™½ç„¶EPICSå®˜æ–¹å¹¶æ²¡æœ‰é€‚é…loongarchå’Œmips64ï¼Œæ— æ³•åšåˆ°å¼€ç®±å³ç”¨ï¼Œä½†åªè¦æœ‰gccã€g++ã€makeã€perlè¿™äº›å·¥å…·ï¼Œç†è®ºä¸Šå°±èƒ½ç¼–è¯‘è¿è¡ŒEPICSï¼Œåœ¨å¼€å§‹ç¼–è¯‘å‰ï¼Œç¡®ä¿ä½ çš„è®¾å¤‡ä¸Šå·²ç»è£…å¥½äº†è¿™äº›å·¥å…·ã€‚
å…³äºå¦‚ä½•ç§°å‘¼ã€Œé¾™æ¶æ„ã€ï¼Œé¾™èŠ¯ç¤¾åŒºä¹Ÿæœ‰ä¸€äº›è®¨è®ºã€‚æœ€åˆæˆ‘ç›´æ¥ä½¿ç”¨loongarch64ï¼Œåæ¥ä¹Ÿä½¿ç”¨è¿‡la64ä½œä¸ºç®€å†™ï¼Œç›´åˆ°æˆ‘çœ‹åˆ°å¦‚ä½•ç§°å‘¼é¾™æ¶æ„ï¼Ÿï¼Œæˆ‘è§‰å¾—æœ‰å¿…è¦å’Œç¤¾åŒºä¿æŒä¸€è‡´ï¼Œåç»­ç»Ÿä¸€ä½¿ç”¨ loong64 ä½œä¸ºæ¶æ„æ ‡è¯†ã€‚
ä¸‹è½½ base è¿™é‡Œæˆ‘ä»¬å°±ä»¥ç›®å‰æœ€æ–°ç‰ˆæœ¬7.0.7ä¸ºä¾‹ï¼Œå…¶å®ƒç‰ˆæœ¬çš„Baseä¹Ÿç±»ä¼¼ã€‚
1 2 3 $ cd ~/ä¸‹è½½/ $ wget https://epics.anl.gov/download/base/base-7.0.7.tar.gz $ tar -xzvf base-7.0.7.tar.gz ä½ å¯ä»¥åœ¨ä½ è§‰å¾—åˆé€‚çš„ä½ç½®ç¼–è¯‘å®‰è£…Baseï¼Œè¿™é‡ŒæŒ‰æˆ‘ä»¬çš„ä¹ æƒ¯ï¼Œæ”¾åœ¨/usr/local/epicsç›®å½•ä¸‹ã€‚
1 2 $ mkdir /usr/local/epics $ mv base-7.0.7 /usr/local/epics/ ç¼–è¯‘ æŒ‰ç…§ä¸€èˆ¬æ­¥éª¤ï¼Œç°åœ¨å°±å¯ä»¥å¼€å§‹ç¼–è¯‘äº†ï¼Œæˆ‘ä»¬å¯ä»¥å…ˆå°è¯•ä¸€ä¸‹ï¼Œçœ‹çœ‹æ˜¯ä»€ä¹ˆç»“æœã€‚
1 2 3 $ cd /usr/local/epics/base-7.0.7/ # æ‰§è¡Œ `make` å‘½ä»¤ $ make ä¸å‡ºæ‰€æ–™ï¼Œæœç„¶å¤±è´¥äº†ï¼Œè¾“å‡ºçš„é”™è¯¯å’Œåœ¨3A4000ä¸Šç¼–è¯‘æ—¶çš„é”™è¯¯ä¹Ÿæœ‰ä¸€äº›ä¸åŒã€‚
ä¸‹é¢æ˜¯åœ¨3A4000ä¸Šç¼–è¯‘æ—¶è¾“å‡ºçš„é”™è¯¯ï¼š
ä¸‹é¢ä¸€è¡ŒæŠ¥é”™æ˜¯å·®ä¸å¤šçš„ï¼Œåœ¨loongarch64ä¸Šç¼–è¯‘å´å¤šäº†ä¸Šé¢ä¸€è¡ŒæŠ¥é”™ï¼Œæ„æ€å°±æ˜¯æ²¡æœ‰è¯†åˆ«å‡ºloongarch64æ¶æ„ã€‚
ä½†æ˜¯å…ˆä¸è¦æ…Œï¼Œè¿™é‡ŒåŒæ—¶ä¹Ÿç»™å‡ºäº†æŠ¥é”™çš„ä½ç½®ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹EpicsHostArch.plé‡Œå†™äº†äº›ä»€ä¹ˆã€‚
1 $ vi ./src/tools/EpicsHostArch.pl å®ƒå…¶å®å°±æ˜¯ä¸€ä¸ªperlè„šæœ¬ï¼Œç”¨æ¥åˆ¤æ–­å½“å‰çš„ç³»ç»Ÿå’Œcpuæ¶æ„ï¼Œè€Œloongarch64æ˜¾ç„¶æ²¡æœ‰åšé€‚é…ï¼Œæ‰€ä»¥å°±å‡ºç°äº†ä¸Šé¢é”™è¯¯ã€‚
â€œArchitecture â€™loongarch64-linux-gnu-thread-multiâ€™ not recognizedâ€
æ—¢ç„¶è¯†åˆ«ä¸äº†loongarch64ï¼Œé‚£æˆ‘ä»¬å°±æ‰‹åŠ¨æ·»åŠ ä¸€è¡Œï¼Œè®©å®ƒå¯ä»¥è¯†åˆ«å°±è¡Œäº†ï¼Œå³ä½¿çœ‹ä¸å¤ªæ‡‚ä¸Šé¢çš„è„šæœ¬ä¹Ÿæ²¡å…³ç³»ï¼Œçœ‹ä¸ªåŠæ‡‚å°±è¡Œäº†ã€‚
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 sub HostArch { my $arch = $Config{archname}; for ($arch) { return 'linux-x86_64' if m/^x86_64-linux/; return 'linux-x86' if m/^i[3-6]86-linux/; return 'linux-arm' if m/^arm-linux/; return 'linux-aarch64' if m/^aarch64-linux/; return 'linux-ppc64' if m/^powerpc64-linux/; return 'linux-loong64' if m/^loongarch64-linux/; return 'windows-x64' if m/^MSWin32-x64/; return 'win32-x86' if m/^MSWin32-x86/; return "cygwin-x86_64" if m/^x86_64-cygwin/; return "cygwin-x86" if m/^i[3-6]86-cygwin/; return 'solaris-sparc' if m/^sun4-solaris/; return 'solaris-x86' if m/^i86pc-solaris/; my ($kernel, $hostname, $release, $version, $cpu) = uname; if (m/^darwin/) { for ($cpu) { return 'darwin-x86' if m/^x86_64/; return 'darwin-aarch64' if m/^arm64/; } die "$0: macOS CPU type '$cpu' not recognized\n"; } die "$0: Architecture '$arch' not recognized\n"; } } æˆ‘ä»¬åœ¨ä¸Šé¢ä½ç½®æ·»åŠ ä¸€è¡Œå†…å®¹ï¼Œæ¥è®©å®ƒå¯ä»¥è¯†åˆ«loongarch64æ¶æ„ã€‚
...</p></div><footer class=entry-footer><span title='2023-02-01 15:51:40 +0800 +0800'>äºŒæœˆ 1, 2023</span>&nbsp;Â·&nbsp;5 åˆ†é’Ÿ&nbsp;Â·&nbsp;987 å­—</footer><a class=entry-link aria-label="post link to é¾™èŠ¯3A5000(LoongArch64)ä¸Šç¼–è¯‘è¿è¡ŒEPICS" href=https://kira-96.github.io/posts/%E9%BE%99%E8%8A%AF3a5000loongarch64%E4%B8%8A%E7%BC%96%E8%AF%91%E8%BF%90%E8%A1%8Cepics/></a></article></main><footer class=footer><span>Copyright Â© 2019-2024 <a href=/>kira&rsquo;s blog</a> Â·</span> Â·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>