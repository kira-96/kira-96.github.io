<!doctype html><html lang=zh dir=auto data-theme=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Qt | âœ¨kiraã®åšå®¢</title><meta name=keywords content><meta name=description content="This is kira's blog"><meta name=author content><link rel=canonical href=https://kira-96.github.io/tags/qt/><link crossorigin=anonymous href=/assets/css/stylesheet.98f7858d07353d656e458d003f39cc16b592a5fbc04fe02e7136bfef3d45dd16.css integrity="sha256-mPeFjQc1PWVuRY0APznMFrWSpfvAT+AucTa/7z1F3RY=" rel="preload stylesheet" as=style><link rel=icon href=https://cdn.jsdelivr.net/gh/kira-96/kira-96.github.io@gh-pages/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://cdn.jsdelivr.net/gh/kira-96/kira-96.github.io@gh-pages/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://cdn.jsdelivr.net/gh/kira-96/kira-96.github.io@gh-pages/favicon-32x32.png><link rel=apple-touch-icon href=https://cdn.jsdelivr.net/gh/kira-96/kira-96.github.io@gh-pages/icons/apple-icon-180x180.png><link rel=mask-icon href=https://cdn.jsdelivr.net/gh/kira-96/kira-96.github.io@gh-pages/icons/apple-icon-76x76.png><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://kira-96.github.io/tags/qt/index.xml title=rss><link rel=alternate hreflang=zh href=https://kira-96.github.io/tags/qt/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51);color-scheme:dark}.list{background:var(--theme)}.toc{background:var(--entry)}}@media(prefers-color-scheme:light){.list::-webkit-scrollbar-thumb{border-color:var(--code-bg)}}</style></noscript><script>localStorage.getItem("pref-theme")==="dark"?document.querySelector("html").dataset.theme="dark":localStorage.getItem("pref-theme")==="light"?document.querySelector("html").dataset.theme="light":window.matchMedia("(prefers-color-scheme: dark)").matches?document.querySelector("html").dataset.theme="dark":document.querySelector("html").dataset.theme="light"</script><link rel=manifest href=https://cdn.jsdelivr.net/gh/kira-96/kira-96.github.io@gh-pages/manifest.json><link rel=stylesheet href=https://cdn.bootcdn.net/ajax/libs/lxgw-wenkai-screen-webfont/1.7.0/style.min.css><script src=https://fastly.jsdelivr.net/npm/live2d-widgets@0/autoload.js></script><script type=text/javascript src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><meta property="og:url" content="https://kira-96.github.io/tags/qt/"><meta property="og:site_name" content="âœ¨kiraã®åšå®¢"><meta property="og:title" content="Qt"><meta property="og:description" content="This is kira's blog"><meta property="og:locale" content="zh"><meta property="og:type" content="website"><meta name=twitter:card content="summary"><meta name=twitter:title content="Qt"><meta name=twitter:description content="This is kira's blog"></head><body class=list id=top><header class=header><nav class=nav><div class=logo><a href=https://kira-96.github.io/ accesskey=h title="âœ¨kiraã®åšå®¢ (Alt + H)">âœ¨kiraã®åšå®¢</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://kira-96.github.io/ title=ğŸ ä¸»é¡µ><span>ğŸ ä¸»é¡µ</span></a></li><li><a href=https://kira-96.github.io/notes/ title=ğŸ““ç¬”è®°><span>ğŸ““ç¬”è®°</span></a></li><li><a href=https://kira-96.github.io/search/ title=ğŸ”ï¸æœç´¢><span>ğŸ”ï¸æœç´¢</span></a></li><li><a href=https://kira-96.github.io/archives/ title=ğŸ—ƒï¸å­˜æ¡£><span>ğŸ—ƒï¸å­˜æ¡£</span></a></li></ul></nav></header><main class=main><header class=page-header><div class=breadcrumbs><a href=https://kira-96.github.io/>ä¸»é¡µ</a>&nbsp;Â»&nbsp;<a href=https://kira-96.github.io/tags/>Tags</a></div><h1>Qt
<a href=/tags/qt/index.xml title=RSS aria-label=RSS><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" height="23"><path d="M4 11a9 9 0 019 9"/><path d="M4 4a16 16 0 0116 16"/><circle cx="5" cy="19" r="1"/></svg></a></h1></header><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>Qt Remote Objects ç®€å•ä½¿ç”¨</h2></header><div class=entry-content><p>ä»‹ç» Qt Remote Objects æ˜¯Qtæ¨å‡ºçš„è¿›ç¨‹é—´é€šä¿¡ï¼ˆIPCï¼‰æ¨¡å—ï¼Œç”¨äºå®ç°è¿›ç¨‹é—´æˆ–è¿œç¨‹ç½‘ç»œé—´é€šä¿¡ï¼Œç®€åŒ–åˆ†å¸ƒå¼ç³»ç»Ÿçš„å¼€å‘ã€‚é€šè¿‡æŠ½è±¡åº•å±‚é€šä¿¡ç»†èŠ‚ï¼Œè®©å¼€å‘è€…èƒ½å¤Ÿåƒæ“ä½œæœ¬åœ°å¯¹è±¡ä¸€æ ·è°ƒç”¨è¿œç¨‹å¯¹è±¡çš„å±æ€§å’Œæ–¹æ³•ã€‚
å…³é”®ç»„æˆ
æºå¯¹è±¡ï¼ˆSourceï¼‰
åœ¨æœåŠ¡ç«¯å®šä¹‰å®é™…å¯¹è±¡ï¼Œå¯¹å¤–æš´éœ²æ•°æ®å’Œæ–¹æ³•ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªæ§åˆ¶è®¾å¤‡çš„ç±»å¯èƒ½åŒ…å«çŠ¶æ€å±æ€§å’Œæ§åˆ¶æŒ‡ä»¤æ–¹æ³•ã€‚ å‰¯æœ¬å¯¹è±¡ï¼ˆReplicaï¼‰
å®¢æˆ·ç«¯é€šè¿‡å‰¯æœ¬å¯¹è±¡ï¼ˆReplicaï¼‰ä¸æºå¯¹è±¡ï¼ˆSourceï¼‰äº¤äº’ã€‚Replica ä¼šå°†å®¢æˆ·ç«¯çš„æ“ä½œè½¬å‘ç»™æœåŠ¡ç«¯ï¼Œå¹¶åŒæ­¥æ›´æ–°å±æ€§å˜åŒ–ã€‚ é€šä¿¡èŠ‚ç‚¹ï¼ˆNodeï¼‰
æœåŠ¡ç«¯é€šè¿‡ QRemoteObjectHost å‘å¸ƒå¯¹è±¡ï¼Œå®¢æˆ·ç«¯é€šè¿‡ QRemoteObjectNode è¿æ¥æœåŠ¡ç«¯å¹¶è·å–å‰¯æœ¬å¯¹è±¡ï¼ˆReplicaï¼‰ã€‚ å…³é”®ç‰¹æ€§
é€æ˜é€šä¿¡ï¼šå®¢æˆ·ç«¯è°ƒç”¨è¿œç¨‹æ–¹æ³•å¦‚åŒæœ¬åœ°è°ƒç”¨ã€‚ è‡ªåŠ¨åŒæ­¥ï¼šæºå¯¹è±¡çš„å±æ€§å˜åŒ–ä¼šè‡ªåŠ¨åŒæ­¥åˆ°æ‰€æœ‰å®¢æˆ·ç«¯å‰¯æœ¬ã€‚ å¤šåè®®æ”¯æŒï¼šæ”¯æŒæœ¬åœ°è¿›ç¨‹é€šä¿¡ï¼ˆlocal://ï¼‰ã€TCP ç½‘ç»œé€šä¿¡ï¼ˆtcp://ï¼‰ç­‰ã€‚ åŠ¨æ€å‘ç°ï¼šå¯é€‰æ³¨å†Œä¸­å¿ƒï¼ˆRegistryï¼‰å®ç°æœåŠ¡è‡ªåŠ¨å‘ç°ã€‚ å…¸å‹åœºæ™¯
å¤šè¿›ç¨‹åä½œï¼šä¾‹å¦‚ GUI åº”ç”¨ä¸åå°æœåŠ¡åˆ†ç¦»ã€‚ åˆ†å¸ƒå¼åº”ç”¨ï¼šä¸»æ§ç¨‹åºä¸å¤šä¸ªå­è¿›ç¨‹å…±äº«é…ç½®æ•°æ®ã€‚ è·¨è®¾å¤‡æ§åˆ¶ï¼šå¦‚é€šè¿‡ PC æ§åˆ¶åµŒå…¥å¼è®¾å¤‡ã€‚ å¾®æœåŠ¡æ¶æ„ï¼šå°†åŠŸèƒ½æ¨¡å—æ‹†åˆ†ä¸ºç‹¬ç«‹è¿›ç¨‹ï¼Œé€šè¿‡ QtRO é€šä¿¡ã€‚ QtROä¸RPCæ¡†æ¶çš„åŠŸèƒ½æ¯”è¾ƒ
é€šä¿¡æ¨¡å¼ Qt Remote Objects RPC(Remote Procedure Call) å¤šå®¢æˆ·ç«¯ âœ… âœ… å•å‘è°ƒç”¨ âœ…ï¼ˆSlotsï¼‰ âœ… å‘å¸ƒ-è®¢é˜… âœ…ï¼ˆSignalsï¼‰ âŒ åŒå‘æµå¼ âŒ âœ… çŠ¶æ€åŒæ­¥ âœ… âŒ è¡¥å……è¯´æ˜
Replica ç¼–è¯‘å™¨ï¼ˆrepcï¼‰åŸºäº API å®šä¹‰æ–‡ä»¶ï¼ˆâ€œrepâ€æ–‡ä»¶ï¼‰ç”Ÿæˆ QObject å¤´æ–‡ä»¶ã€‚å½“ repc å¤„ç†è¿™äº›æ–‡ä»¶æ—¶ï¼Œrepc ä¼šç”Ÿæˆ Source å¤´æ–‡ä»¶å’Œ Replica å¤´æ–‡ä»¶ã€‚
Qt Remote Objects æ”¯æŒé™æ€å’ŒåŠ¨æ€å‰¯æœ¬ä¸¤ç§æ–¹å¼ï¼Œä¸¤ç§æ–¹å¼çš„å®¢æˆ·ç«¯ä»£ç ç¼–å†™æ–¹å¼æœ‰æ‰€ä¸åŒã€‚
...</p></div><footer class=entry-footer><span title='2025-04-17 16:15:28 +0800 +0800'>2025å¹´4æœˆ17æ—¥</span>&nbsp;Â·&nbsp;<span>6 åˆ†é’Ÿ</span>&nbsp;Â·&nbsp;<span>1233 å­—</span></footer><a class=entry-link aria-label="post link to Qt Remote Objects ç®€å•ä½¿ç”¨" href=https://kira-96.github.io/posts/qt-remote-objects/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>Qt5ç¼–å†™Qt Quick2æ’ä»¶</h2></header><div class=entry-content><p>å‰è¨€ æœ€è¿‘åœ¨è¯•ç€æŠŠè‡ªå®šä¹‰çš„QMLæ§ä»¶å°è£…æˆæ’ä»¶ä¾›å…¶ä»–ç¨‹åºè°ƒç”¨ï¼Œç”±äºæˆ‘ä½¿ç”¨çš„è¿˜æ˜¯Qt5ï¼Œåœ¨æ„å»ºçš„è¿‡ç¨‹ä¸­é‡åˆ°ä¸å°‘é—®é¢˜ï¼Œè¿™é‡Œåšä¸€ä¸‹ç®€å•æ±‡æ€»ã€‚
æ–°å»ºé¡¹ç›® æ–°å»ºåº“â†’Qt Quick2 Extension Pluginï¼ŒQt 5ç‰ˆæœ¬ä»…æ”¯æŒä½¿ç”¨QMakeä½œä¸ºæ„å»ºå¥—ä»¶ã€‚Qt 6æ‰æ”¯æŒä½¿ç”¨CMakeä½œä¸ºQMLæ‰©å±•æ’ä»¶çš„æ„å»ºå¥—ä»¶ã€‚
ç¼–å†™æ’ä»¶ ä¾‹å¦‚ï¼Œæˆ‘æ–°å»ºäº†ä¸€ä¸ªå«åšTestçš„æ’ä»¶åº“ï¼Œé¡¹ç›®ä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªTestPluginçš„ç±»ï¼Œè¿™ä¸ªç±»ç»§æ‰¿è‡ªQQmlExtensionPluginï¼Œæˆ‘ä»¬éœ€è¦é‡å†™å®ƒçš„ä¸¤ä¸ªè™šå‡½æ•°ã€‚
testplugin.h â–¼ 1 2 3 4 5 6 7 8 9 10 11 #include &lt;QQmlExtensionPlugin> class TestPlugin : public QQmlExtensionPlugin { Q_OBJECT Q_PLUGIN_METADATA(IID QQmlExtensionInterface_iid) public: void registerTypes(const char *uri) Q_DECL_OVERRIDE; void initializeEngine(QQmlEngine *engine, const char *uri) Q_DECL_OVERRIDE; }; testplugin.cpp â–¼ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 #include "testplugin.h" #include "myitem.h" #include &lt;qqml.h> void TestPlugin::registerTypes(const char *uri) { // @uri com.mycompany.qmlcomponents qmlRegisterType&lt;MyItem>(uri, 1, 0, "MyItem"); } void TestPlugin::initializeEngine(QQmlEngine *engine, const char *uri) { QQmlExtensionPlugin::initializeEngine(engine, uri); } å…¶ä¸­ï¼ŒMyItemå°±æ˜¯æˆ‘ä»¬è‡ªå®šä¹‰çš„æ§ä»¶ã€‚ç®€å•çœ‹ä¸€ä¸‹ç¤ºä¾‹ä»£ç ï¼š
...</p></div><footer class=entry-footer><span title='2025-03-13 10:23:47 +0800 +0800'>2025å¹´3æœˆ13æ—¥</span>&nbsp;Â·&nbsp;<span>4 åˆ†é’Ÿ</span>&nbsp;Â·&nbsp;<span>695 å­—</span></footer><a class=entry-link aria-label="post link to Qt5ç¼–å†™Qt Quick2æ’ä»¶" href=https://kira-96.github.io/posts/qt5-quick2-extension-plugin/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>QMLæ§ä»¶è®¿é—®EPICSè¿‡ç¨‹å˜é‡çš„æ€è·¯</h2></header><div class=entry-content><p>å‰è¨€ å†™è¿™ç¯‡æ–‡ç« çš„æƒ³æ³•æ˜¯ä½¿ç”¨è‡ªå®šä¹‰QMLæ§ä»¶çš„æ–¹å¼è®¿é—®EPICSè¿‡ç¨‹å˜é‡ï¼Œç°æœ‰çš„Qt EPICSæ¡†æ¶ä¹‹å‰ä¹Ÿä»‹ç»è¿‡äº†ï¼Œè¿˜æœ‰é…å¥—çš„QEGuiå·¥å…·ï¼Œæ¡†æ¶çš„åŸºæœ¬åŠŸèƒ½å·²ç»æ¯”è¾ƒå®Œå–„ï¼Œä½†å®é™…ä½¿ç”¨è¿‡ç¨‹ä¸­è¿˜æ˜¯é‡åˆ°äº†ä¸€äº›é—®é¢˜ã€‚æˆ‘æ€»ç»“æœ‰ä»¥ä¸‹2ç‚¹ï¼š
QEGuiå·¥å…·åªèƒ½åŠ è½½åŸºäºWidgetçš„.uiç•Œé¢æ–‡ä»¶ï¼Œæ–‡ä»¶åªèƒ½åŒ…å«å¸ƒå±€ã€æ§ä»¶å’Œæ§ä»¶å±æ€§ï¼Œä¸èƒ½åµŒå…¥ä»£ç ï¼ˆC++ä»£ç å¿…é¡»ç¼–è¯‘ï¼‰ã€‚ç”¨æˆ·çš„æ“ä½œï¼ˆå¦‚ï¼šè¾“å…¥ã€ç‚¹å‡»æŒ‰é’®ç­‰ï¼‰çš„ç›¸åº”æ§½å‡½æ•°å°è£…åœ¨æ¡†æ¶è‡ªå®šä¹‰çš„æ§ä»¶é‡Œå®ç°ï¼Œè¿™æ ·æå¤§æ–¹ä¾¿äº†ç”¨æˆ·çš„å¼€å‘ï¼Œç”¨æˆ·åªéœ€è¦è®¾è®¡ç•Œé¢ï¼Œå¡«å†™å˜é‡åå°±å¯ä»¥å®ç°å˜é‡è®¿é—®ï¼Œä½†ç›¸åº”çš„ä¹Ÿå¤±å»äº†å¾ˆå¤§çš„çµæ´»æ€§ï¼Œç¨‹åºçš„åŠŸèƒ½å˜å¾—å¾ˆå•ä¸€ã€‚
QEGuiå·¥å…·ä¸ä¸€å®šç¬¦åˆå®é™…å¼€å‘è¿‡ç¨‹ä¸­çš„éœ€æ±‚ï¼Œä»…ä½¿ç”¨QEGuiåŠ è½½.uiç•Œé¢ï¼Œè„±ç¦»äº†C++ä»£ç ï¼Œç¨‹åºå¾ˆéš¾å®ç°ç”¨æˆ·æƒ³è¦çš„æ•ˆæœã€‚è€Œæ›´å¥½çš„é€‰æ‹©æ˜¯è°ƒç”¨Qt EPICSæ¡†æ¶åŠ¨æ€åº“æä¾›çš„æ§ä»¶ï¼Œç»“åˆC++ä»£ç å¼€å‘åº”ç”¨ç¨‹åºï¼Œä½†å´ä¸å¾—ä¸è¿›è¡Œç¼–è¯‘æ“ä½œã€‚
é‚£ä¹ˆï¼Œæœ‰æ²¡æœ‰æ›´å¥½çš„åŸºäºQtçš„EPICSæ¡†æ¶æ–¹æ¡ˆå‘¢ï¼Ÿ
åˆšå¥½æœ€è¿‘æˆ‘ä¹Ÿå­¦ä¹ å®è·µäº†QMLç›¸å…³çš„å†…å®¹ï¼Œè¿™ç§å‰åç«¯åˆ†ç¦»å¼€å‘çš„æ–¹å¼ç»™äº†æˆ‘ä¸€äº›çµæ„Ÿã€‚æˆ‘ä»¬å®Œå…¨å¯ä»¥åœ¨Qt EPICSæ¡†æ¶çš„åŸºç¡€ä¸Šï¼Œå®ç°è‡ªå®šä¹‰QMLæ§ä»¶è®¿é—®EPICSè¿‡ç¨‹å˜é‡ï¼Œç”¨æˆ·ä½¿ç”¨QMLç¼–å†™ç•Œé¢ï¼Œè°ƒç”¨è‡ªå®šä¹‰QMLæ§ä»¶å³å¯ï¼Œå¯ä»¥å®ç°å’ŒQt EPICSæ¡†æ¶åŠ è½½.uiç•Œé¢æ–‡ä»¶ç±»ä¼¼çš„åŠŸèƒ½ã€‚ä½†QMLåœ¨åŠ¨ç”»ã€3Dæ˜¾ç¤ºç­‰æ–¹é¢æ˜æ˜¾å…·æœ‰ä¼˜åŠ¿ï¼Œè¿˜æœ‰ä¸€ç‚¹æ˜¯åŸºäºWidgetçš„.uiç•Œé¢æ–‡ä»¶ä¸å…·å¤‡çš„ï¼šQMLæœ¬èº«å¯ä»¥åµŒå…¥javascriptå‡½æ•°ï¼ŒåŠ¨æ€æ§åˆ¶ç•Œé¢çš„æ˜¾ç¤ºã€åˆ‡æ¢ç­‰ï¼Œç”šè‡³å¯ä»¥å®ç°å’Œåº•å±‚C++æ¥å£çš„äº¤äº’ã€‚è€ŒQMLæœ¬èº«ä¹Ÿä¸éœ€è¦è¿›è¡Œç¼–è¯‘ï¼Œå®Œå…¨å¯ä»¥åªä½¿ç”¨QMLè¯­è¨€å®ç°ç¨‹åºå¼€å‘ï¼Œä¸”å…·æœ‰å¾ˆé«˜çµæ´»æ€§ã€‚
å®ç°æ€è·¯ Qt EPICS æ¡†æ¶æä¾›äº†QCaObjectç±»è®¿é—®EPICSè¿‡ç¨‹å˜é‡ï¼Œä½†è¯¥ç±»å‡ ä¹æ˜¯å®Œå…¨ä¸ºQEWidgetæœåŠ¡çš„ï¼Œå¹¶æ²¡æœ‰å£°æ˜å±æ€§ï¼ˆpropertyï¼‰ï¼Œæ— æ³•ç›´æ¥åœ¨QMLä¸­ä½¿ç”¨ã€‚
æ‰€ä»¥ç¬¬1æ­¥éœ€è¦å¯¹QCaObjectåšä¸€å±‚å°è£…ï¼Œå°†EPICSè¿‡ç¨‹å˜é‡çš„å­—æ®µå£°æ˜ä¸ºQPvObjectç±»çš„å±æ€§ï¼Œç„¶åå°±å¯ä»¥åœ¨QMLä¸­è®¿é—®EPICSè¿‡ç¨‹å˜é‡äº†ã€‚
ç¬¬2æ­¥æ˜¯å°†QPvObjectå°è£…è¿›è‡ªå®šä¹‰çš„QMLæ§ä»¶QmlPvControlï¼Œå®ç°æ•°æ®çš„æ˜¾ç¤ºã€è¾“å…¥ç­‰æ“ä½œã€‚
ç¬¬3æ­¥å°†QmlPvControlå¯¼å…¥ï¼ˆimportï¼‰åˆ°QMLæ–‡ä»¶ï¼Œåœ¨å¤–éƒ¨QMLæ–‡ä»¶ä¸­ä½¿ç”¨è‡ªå®šä¹‰æ§ä»¶ã€‚
ä»£ç ç¤ºä¾‹ ç”±äºå®Œæ•´çš„ä»£ç è¾ƒå¤šï¼Œè¿™é‡Œåªæ”¾éƒ¨åˆ†ä»£ç ã€‚
QPvObjectç±»çš„å®šä¹‰
qpvobject.h â–¼ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 class QPvObject : public QObject { Q_OBJECT public: enum epicsAlarmSeverity { NO_ALARM, /**&lt; No alarm */ MINOR_ALARM, /**&lt; Minor alarm severity */ MAJOR_ALARM, /**&lt; Major alarm severity */ INVALID_ALARM, /**&lt; Invalid alarm severity */ ALARM_NSEV /**&lt; Number of alarm severities */ }; Q_ENUM(epicsAlarmSeverity) enum pvConnectionMode { NONE, WR_ONLY, /**&lt; Write only */ RD_ONCE, /**&lt; Read once */ MONITOR /**&lt; Read and Write */ }; Q_ENUM(pvConnectionMode) private: Q_PROPERTY(QString pvName READ pvName WRITE setPvName NOTIFY pvNameChanged FINAL) Q_PROPERTY(QVariant value READ value WRITE setValue NOTIFY valueChanged FINAL) Q_PROPERTY(QPvObject::pvConnectionMode mode READ mode WRITE setMode NOTIFY modeChanged FINAL) Q_PROPERTY(QString hostName READ hostName NOTIFY hostNameChanged FINAL) Q_PROPERTY(QString fieldType READ fieldType NOTIFY fieldTypeChanged FINAL) Q_PROPERTY(QString descriptor READ descriptor NOTIFY descriptorChanged FINAL) Q_PROPERTY(QString egu READ egu NOTIFY eguChanged FINAL) Q_PROPERTY(QCaDateTime dateTime READ dateTime NOTIFY dateTimeChanged FINAL) Q_PROPERTY(quint16 status READ status NOTIFY statusChanged FINAL) Q_PROPERTY(QPvObject::epicsAlarmSeverity severity READ severity NOTIFY severityChanged FINAL) Q_PROPERTY(QString statusName READ statusName NOTIFY statusNameChanged FINAL) Q_PROPERTY(QString severityName READ severityName NOTIFY severityNameChanged FINAL) Q_PROPERTY(quint32 hostElementCount READ hostElementCount NOTIFY hostElementCountChanged FINAL) Q_PROPERTY(quint32 dataElementCount READ dataElementCount NOTIFY dataElementCountChanged FINAL) Q_PROPERTY(bool readAccess READ readAccess NOTIFY readAccessChanged FINAL) Q_PROPERTY(bool writeAccess READ writeAccess NOTIFY writeAccessChanged FINAL) public: QString pvName() const; QVariant value() const; QPvObject::pvProtocol protocol() const; QPvObject::pvConnectionMode mode() const; QString hostName() const; QString fieldType() const; QString descriptor() const; QString egu() const; const QCaDateTime& dateTime() const; quint16 status() const; QPvObject::epicsAlarmSeverity severity() const; QString statusName() const; QString severityName() const; quint32 hostElementCount() const; quint32 dataElementCount() const; bool readAccess() const; bool writeAccess() const; public Q_SLOTS: virtual void setPvName(const QString &amp;pvname) = 0; virtual void setValue(const QVariant &amp;value) = 0; virtual void setMode(const QPvObject::pvConnectionMode &amp;mode); Q_SIGNALS: void pvNameChanged(const QString&); void valueChanged(const QVariant&); void protocolChanged(const QPvObject::pvProtocol&); void modeChanged(const QPvObject::pvConnectionMode&); void dateTimeChanged(const QCaDateTime&); void fieldTypeChanged(const QString&); void descriptorChanged(const QString&); void eguChanged(const QString&); void hostNameChanged(const QString&); void statusChanged(const quint16); void severityChanged(const QPvObject::epicsAlarmSeverity); void statusNameChanged(const QString); void severityNameChanged(const QString); void hostElementCountChanged(const quint32); void dataElementCountChanged(const quint32); void readAccessChanged(const bool); void writeAccessChanged(const bool); protected: QPointer&lt;qcaobject::QCaObject> m_caobject; // ... }; æ³¨æ„åˆ°QPvObjectç±»æœ‰ä¸¤ä¸ªè™šå‡½æ•°setPvNameå’ŒsetValueï¼Œè¿™ä¸¤ä¸ªå‡½æ•°éœ€è¦å­ç±»å®ç°ã€‚
...</p></div><footer class=entry-footer><span title='2025-02-20 16:27:36 +0800 +0800'>2025å¹´2æœˆ20æ—¥</span>&nbsp;Â·&nbsp;<span>5 åˆ†é’Ÿ</span>&nbsp;Â·&nbsp;<span>891 å­—</span></footer><a class=entry-link aria-label="post link to QMLæ§ä»¶è®¿é—®EPICSè¿‡ç¨‹å˜é‡çš„æ€è·¯" href=https://kira-96.github.io/posts/qml%E6%8E%A7%E4%BB%B6%E8%AE%BF%E9%97%AEepics%E8%BF%87%E7%A8%8B%E5%8F%98%E9%87%8F%E7%9A%84%E6%80%9D%E8%B7%AF/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>EPICS Qtå®‰è£…</h2></header><div class=entry-content><p>å‰è¨€ æœ¬æ–‡ä¸»è¦è®°å½•äº†EPICS Qtåœ¨Linuxä¸Šçš„å®‰è£…æ­¥éª¤ã€‚è¿™é‡Œä»¥loongnixæ“ä½œç³»ç»Ÿä¸ºä¾‹ï¼ŒUbuntuç³»ç»Ÿä¸Šç¼–è¯‘å®‰è£…æ­¥éª¤ç±»ä¼¼ã€‚
EPICS Qtæ˜¯ä¸€ä¸ªåŸºäºQtçš„åˆ†å±‚æ¡†æ¶ï¼Œä½¿ç”¨Channel Access ï¼ˆCAï¼‰ and PV Accessï¼ˆPVAï¼‰è®¿é—®EPICSæ•°æ®ã€‚å®ƒæ˜¯ä¸ºå¿«é€Ÿå¼€å‘æ§åˆ¶ç³»ç»Ÿå›¾å½¢ç•Œé¢è€Œè®¾è®¡çš„ï¼Œæœ€åˆæ˜¯åœ¨æ¾³å¤§åˆ©äºšåŒæ­¥åŠ é€Ÿå™¨å¼€å‘çš„ã€‚
å®‰è£…EPICS è¿™é‡Œä¸å†å†™å…·ä½“æ­¥éª¤äº†ï¼Œæ€»ä¹‹å°±æ˜¯éå¸¸ç®€å•ï¼Œä¸‹è½½ã€è§£å‹ã€ç¼–è¯‘å³å¯ã€‚å…·ä½“æ­¥éª¤å¯ä»¥å‚è€ƒä»¥å‰çš„æ–‡ç« ã€‚
å®‰è£…Qt ç›´æ¥ä½¿ç”¨ç»ˆç«¯å®‰è£…Qt
sh â–¼ 1 2 3 4 5 sudo apt update sudo apt install qtbase5-dev qt5-qmake qtcreator sudo apt install qtdeclarative5-dev qttools5-dev # å®‰è£…Qt Svgåº“ï¼Œç¼–è¯‘QWTæ—¶éœ€è¦ç”¨åˆ° sudo apt install libqt5svg5-dev å®‰è£…QWT Qt EPICSæ¨èä½¿ç”¨Qwt 6.1.4ï¼Œå¦‚æœåœ¨Ubuntu 20.04ä¸Šç›´æ¥é€šè¿‡ç»ˆç«¯å®‰è£…ä¹Ÿæ˜¯è¿™ä¸ªç‰ˆæœ¬ã€‚æˆ‘ä½¿ç”¨Qwt 6.2.0ç¼–è¯‘ï¼Œä¹Ÿæ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼Œè¿™é‡Œä»¥Qwt 6.2.0ä¸ºä¾‹ã€‚
æœ€æ–°æµ‹è¯•ï¼šQwt 6.3.0ä¹Ÿå¯ä»¥ç”¨ ~
å…ˆä¸‹è½½Qwtçš„æºç  ä¸‹è½½Qwt-6.2.0ã€‚ ä¸‹è½½å®Œæˆåè§£å‹
sh â–¼ 1 2 3 4 # è§£å‹tar.bz2 tar -jxvf qwt-6.2.0.tar.bz2 # è§£å‹zip unzip qwt-6.2.0.zip è§£å‹å®Œæˆåç¼–è¯‘Qwtï¼Œä½¿ç”¨QtCreatoræˆ–è€…åœ¨ç»ˆç«¯ä½¿ç”¨qmakeéƒ½å¯ä»¥ã€‚
ç„¶åæ‰‹åŠ¨å°†ç¼–è¯‘ç”Ÿæˆçš„æ–‡ä»¶å¤åˆ¶åˆ°ä»¥ä¸‹ä½ç½®ï¼Œä¾‹ï¼š
sh â–¼ 1 2 3 4 5 6 7 # å¤åˆ¶ç¼–è¯‘ç”Ÿæˆçš„qwt sudo cp -r build-qwt-unknown-Release/lib/* /usr/lib/loongarch64-linux-gnu/ # å¤åˆ¶ç¼–è¯‘ç”Ÿæˆçš„designeræ’ä»¶ sudo cp build-qwt-unknown-Release/designer/plugins/designer/libqwt_designer_plugin.so /usr/lib/loongarch64-linux-gnu/qt5/plugins/designer/ # å¤åˆ¶qwtå¤´æ–‡ä»¶ sudo mkdir /usr/include/qwt sudo cp qwt-6.2.0/src/*.h /usr/include/qwt å®‰è£…ACAI ACAI Channel Access Interface
...</p></div><footer class=entry-footer><span title='2023-05-04 15:06:56 +0800 +0800'>2023å¹´5æœˆ4æ—¥</span>&nbsp;Â·&nbsp;<span>2 åˆ†é’Ÿ</span>&nbsp;Â·&nbsp;<span>378 å­—</span></footer><a class=entry-link aria-label="post link to EPICS Qtå®‰è£…" href=https://kira-96.github.io/posts/epics-qt%E5%AE%89%E8%A3%85/></a></article></main><footer class=footer><span>Â© 2019-2025 <a href=/>kira&rsquo;s blog</a> Â· LICENSED under <a href=https://github.com/kira-96/kira-96.github.io/tree/main/LICENSE>CC-BY-4.0</a></span> Â·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>document.querySelectorAll(".fold-button").forEach(e=>{e.addEventListener("click",t=>{const n=t.target.closest(".mac-codeblock"),s=n.querySelector(".mac-content");s.classList.toggle("folded"),e.classList.toggle("folded")})})</script><script>let menu=document.getElementById("menu");if(menu){const e=localStorage.getItem("menu-scroll-position");e&&(menu.scrollLeft=parseInt(e,10)),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}}document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{const e=document.querySelector("html");e.dataset.theme==="dark"?(e.dataset.theme="light",localStorage.setItem("pref-theme","light")):(e.dataset.theme="dark",localStorage.setItem("pref-theme","dark"))})</script></body></html>