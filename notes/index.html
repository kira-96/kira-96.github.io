<!doctype html><html lang=zh dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Notes | ✨kiraの博客</title>
<meta name=keywords content><meta name=description content="Notes - ✨kiraの博客"><meta name=author content><link rel=canonical href=https://kira-96.github.io/notes/><link crossorigin=anonymous href=/assets/css/stylesheet.026333dcafeaf3c82b8515026af0a6531c530abffdaf73d32779337b0ace14c0.css integrity="sha256-AmMz3K/q88grhRUCavCmUxxTCr/9r3PTJ3kzewrOFMA=" rel="preload stylesheet" as=style><link rel=icon href=https://cdn.jsdelivr.net/gh/kira-96/kira-96.github.io@gh-pages/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://cdn.jsdelivr.net/gh/kira-96/kira-96.github.io@gh-pages/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://cdn.jsdelivr.net/gh/kira-96/kira-96.github.io@gh-pages/favicon-32x32.png><link rel=apple-touch-icon href=https://cdn.jsdelivr.net/gh/kira-96/kira-96.github.io@gh-pages/icons/apple-icon-180x180.png><link rel=mask-icon href=https://cdn.jsdelivr.net/gh/kira-96/kira-96.github.io@gh-pages/icons/apple-icon-76x76.png><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://kira-96.github.io/notes/index.xml><link rel=alternate hreflang=zh href=https://kira-96.github.io/notes/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><link rel=manifest href=https://cdn.jsdelivr.net/gh/kira-96/kira-96.github.io@gh-pages/manifest.json><script src=https://fastly.jsdelivr.net/gh/stevenjoezhang/live2d-widget@latest/autoload.js></script><script type=text/javascript src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><meta property="og:url" content="https://kira-96.github.io/notes/"><meta property="og:site_name" content="✨kiraの博客"><meta property="og:title" content="Notes"><meta property="og:description" content="kira's blog"><meta property="og:locale" content="zh"><meta property="og:type" content="website"><meta name=twitter:card content="summary"><meta name=twitter:title content="Notes"><meta name=twitter:description content="kira's blog"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Notes","item":"https://kira-96.github.io/notes/"}]}</script></head><body class=list id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://kira-96.github.io/ accesskey=h title="✨kiraの博客 (Alt + H)">✨kiraの博客</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://kira-96.github.io/ title=🏠主页><span>🏠主页</span></a></li><li><a href=https://kira-96.github.io/notes/ title=📓笔记><span class=active>📓笔记</span></a></li><li><a href=https://kira-96.github.io/search/ title=🔍️搜索><span>🔍️搜索</span></a></li><li><a href=https://kira-96.github.io/archives/ title=🗃️存档><span>🗃️存档</span></a></li></ul></nav></header><main class=main><header class=page-header><div class=breadcrumbs><a href=https://kira-96.github.io/>主页</a></div><h1>Notes
<a href=/notes/index.xml title=RSS aria-label=RSS><svg viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" height="23"><path d="M4 11a9 9 0 019 9"/><path d="M4 4a16 16 0 0116 16"/><circle cx="5" cy="19" r="1"/></svg></a></h1></header><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Linux CPU核心隔离
<span class=entry-hint title=Draft><svg height="20" viewBox="0 -960 960 960" fill="currentcolor"><path d="M160-410v-60h3e2v60H160zm0-165v-60h470v60H160zm0-165v-60h470v60H160zm360 580v-123l221-220q9-9 20-13t22-4q12 0 23 4.5t20 13.5l37 37q9 9 13 20t4 22-4.5 22.5T862.09-380L643-160H520zm3e2-263-37-37 37 37zM580-220h38l121-122-18-19-19-18-122 121v38zm141-141-19-18 37 37-18-19z"/></svg></span></h2></header><div class=entry-content><p>CPU隔离主要是为了确保关键进程获得更高的性能，减少干扰。常见的隔离方法有cgroups、taskset、isolcpus内核参数，还有实时内核（PREEMPT RT）配置。还有CPU亲和性、IRQ屏蔽技术。
isolcpus：在启动内核时隔离某些CPU核心，防止普通进程使用。但需要结合cgroups或taskset来分配进程到隔离核心。 nohz_full：在隔离核心禁用时钟中断（Tickless 模式）。 rcu_nocbs：将 RCU 回调任务移出隔离核心。 修改内核启动参数
主要参数：ioslcpus=? nohz_full=? rcu_nocbs=?
例： earlycon console=tty console=ttyS0,115200 isolcpus=1,2 nohz_full=1,2 rcu_nocbs=1,2 acpi=off rdinit=/sbin/init rootdelay=5 root=/dev/sda1
通过GRUB配置
1 2 3 4 # /etc/default/grub # 添加isolcpus参数 GRUB_CMDLINE_LINUX="isolcpus=1,2 nohz_full=1,2 rcu_nocbs=1,2" 修改完成后更新GRUB配置：sudo update-grub
设置进程CPU亲和性
1 2 3 4 # 启动时绑定到核心 1,2 taskset -a -c 1,2 ./st.cmd # 修改运行中进程的 CPU 亲和性 taskset -cp &lt;core_list> &lt;pid> IgH EtherCAT驱动设置CPU亲和性
在脚本中添加启动参数run_on_cpu=?，例：
1 2 3 4 5 6 7 8 9 10 11 ## /sbin/ethercatctl ... # load master module if ! ${MODPROBE} ${MODPROBE_FLAGS} ec_master \ main_devices="${DEVICES}" backup_devices="${BACKUPS}" run_on_cpu=1; then exit 1 fi ... 设置ECMC线程的CPU亲和性
...</p></div><footer class=entry-footer><span title='2025-03-13 14:59:45 +0800 +0800'>三月 13, 2025</span>&nbsp;·&nbsp;1 分钟&nbsp;·&nbsp;140 字</footer><a class=entry-link aria-label="post link to Linux CPU核心隔离" href=https://kira-96.github.io/notes/linux-cpu-isolation/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>EPICS IOC 使用 SNCSEQ
<span class=entry-hint title=Draft><svg height="20" viewBox="0 -960 960 960" fill="currentcolor"><path d="M160-410v-60h3e2v60H160zm0-165v-60h470v60H160zm0-165v-60h470v60H160zm360 580v-123l221-220q9-9 20-13t22-4q12 0 23 4.5t20 13.5l37 37q9 9 13 20t4 22-4.5 22.5T862.09-380L643-160H520zm3e2-263-37-37 37 37zM580-220h38l121-122-18-19-19-18-122 121v38zm141-141-19-18 37 37-18-19z"/></svg></span></h2></header><div class=entry-content><p>IOC 配置SNCSEQ：
1 2 3 4 5 6 # example/configure/RELEASE.local EPICS_BASE = /path/to/your/build/of/epics-base SUPPORT = ${EPICS_BASE}/../epics-modules PVXS = ${SUPPORT}/pvxs # 添加 SNCSEQ SNCSEQ = ${SUPPORT}/sequencer example工程中相关的代码：
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 # example/iocExampleApp/src/Makefile ... # Link in the code from our support library iocExample_LIBS += iocExampleSupport # To build SNL programs, SNCSEQ must be defined # in the &lt;top>/configure/RELEASE file ifneq ($(SNCSEQ),) # Build sncExample into iocExampleSupport sncExample_SNCFLAGS += +r iocExample_DBD += sncExample.dbd # A .stt sequence program is *not* pre-processed: iocExampleSupport_SRCS += sncExample.stt iocExampleSupport_LIBS += seq pv iocExample_LIBS += seq pv # Build sncProgram as a standalone program PROD_HOST += sncProgram sncProgram_SNCFLAGS += +m # A .st sequence program *is* pre-processed: sncProgram_SRCS += sncProgram.st sncProgram_LIBS += seq pv sncProgram_LIBS += $(EPICS_BASE_HOST_LIBS) endif ... 1 2 3 4 5 6 7 # sncExample.dbd # The name below is derived from the name of the SNL program # inside the source file, not from its filename. Here the # program is called sncExample, but is compiled in both the # sncExample.stt and sncProgram.st source files. registrar(sncExampleRegistrar) 1 2 3 # sncProgram.st #include "../sncExample.stt" 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 # sncExample.stt program sncExample double v; assign v to "{user}:aiExample"; monitor v; ss ss1 { state init { when (delay(10)) { printf("sncExample: Startup delay over\n"); } state low } state low { when (v > 5.0) { printf("sncExample: Changing to high\n"); } state high } state high { when (v &lt;= 5.0) { printf("sncExample: Changing to low\n"); } state low } } 修改启动脚本，在IOC启动时运行SNL程序：
...</p></div><footer class=entry-footer><span title='2025-01-13 10:45:01 +0800 +0800'>一月 13, 2025</span>&nbsp;·&nbsp;2 分钟&nbsp;·&nbsp;316 字</footer><a class=entry-link aria-label="post link to EPICS IOC 使用 SNCSEQ" href=https://kira-96.github.io/notes/epics-ioc-%E4%BD%BF%E7%94%A8-sncseq/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>ecmc构建指南
<span class=entry-hint title=Draft><svg height="20" viewBox="0 -960 960 960" fill="currentcolor"><path d="M160-410v-60h3e2v60H160zm0-165v-60h470v60H160zm0-165v-60h470v60H160zm360 580v-123l221-220q9-9 20-13t22-4q12 0 23 4.5t20 13.5l37 37q9 9 13 20t4 22-4.5 22.5T862.09-380L643-160H520zm3e2-263-37-37 37 37zM580-220h38l121-122-18-19-19-18-122 121v38zm141-141-19-18 37 37-18-19z"/></svg></span></h2></header><div class=entry-content><p>软件包 epics-base/epics-base: The C/C++ core of the EPICS Base control system toolkit epics-modules/ecmc: EPICS Support for EtherCAT Motion Controller (ECMC) and Generic IO Controller paulscherrerinstitute/exprtk-ecmc: ESS Customized exprtk : C++ Mathematical Expression Parsing And Evaluation Library paulscherrerinstitute/ecmccfg: Module to handle configuration scripts for EtherCATMotion Controller (ECMC) epics-modules/asyn: EPICS module for driver and device support EuropeanSpallationSource/motor: APS BCDA synApps module: motor pantor/ruckig: Motion Generation for Robots and Machines. EtherLab / EtherCAT Master · GitLab 构建顺序 epics-base asyn motor etherlab ruckig ecmc epics-base 正常交叉编译。
...</p></div><footer class=entry-footer><span title='2024-11-26 08:56:34 +0800 +0800'>十一月 26, 2024</span>&nbsp;·&nbsp;7 分钟&nbsp;·&nbsp;1394 字</footer><a class=entry-link aria-label="post link to ecmc构建指南" href=https://kira-96.github.io/notes/ecmc%E6%9E%84%E5%BB%BA%E6%8C%87%E5%8D%97/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Hugo Diagrams
<span class=entry-hint title=Draft><svg height="20" viewBox="0 -960 960 960" fill="currentcolor"><path d="M160-410v-60h3e2v60H160zm0-165v-60h470v60H160zm0-165v-60h470v60H160zm360 580v-123l221-220q9-9 20-13t22-4q12 0 23 4.5t20 13.5l37 37q9 9 13 20t4 22-4.5 22.5T862.09-380L643-160H520zm3e2-263-37-37 37 37zM580-220h38l121-122-18-19-19-18-122 121v38zm141-141-19-18 37 37-18-19z"/></svg></span></h2></header><div class=entry-content><p>Hugo原生支持GoAT，可以直接使用goat代码块。
1 2 3 4 1 2 3 4 1 2 3 4 1 2 3 4 1 2 3 4 1 2 3 4 · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · a b a b a b a b & A M S i o i q f b B x u j o e a ( - x d r a > e f R > c o C n u o b ( n r ) ) d n e e J d r o s i n N o R D t o i u a a n g d d l o i t n e D i a g o n a l s C V u e r r v t e i d c a l n o t A N C : o u l d r r i A a / I v n s i n e e h s t d - e - t r l B i h i i s i o n ' s r e q n . u * o o b t t o e l a s d ' * l i n e D o n S e e ? a r c 3 h 本博客还支持Mermaid.js作图。
...</p></div><footer class=entry-footer><span title='2024-01-30 09:45:30 +0800 +0800'>一月 30, 2024</span>&nbsp;·&nbsp;2 分钟&nbsp;·&nbsp;393 字</footer><a class=entry-link aria-label="post link to Hugo Diagrams" href=https://kira-96.github.io/notes/hugo-diagrams/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>交叉编译 ACAI
<span class=entry-hint title=Draft><svg height="20" viewBox="0 -960 960 960" fill="currentcolor"><path d="M160-410v-60h3e2v60H160zm0-165v-60h470v60H160zm0-165v-60h470v60H160zm360 580v-123l221-220q9-9 20-13t22-4q12 0 23 4.5t20 13.5l37 37q9 9 13 20t4 22-4.5 22.5T862.09-380L643-160H520zm3e2-263-37-37 37 37zM580-220h38l121-122-18-19-19-18-122 121v38zm141-141-19-18 37 37-18-19z"/></svg></span></h2></header><div class=entry-content><p>关于 ACAI ACAI 是一个C++封装的Channel Access协议应用开发接口（API），提供异步通道访问接口。
ACAI Channel Access Interface
EPICS Qt依赖ACAI提供的Channel Access接口。
前置步骤 这篇笔记是交叉编译EPICS和IOC内容的补充。
在进行下面步骤前，请完成配置交叉编译环境和编译 EPICS Base。
这里依旧以龙芯架构为例。
EPICS base 编译完成后，可以看到bin目录下有linux-loong64、linux-x86_64两个目录，linux-x86_64目录下比linux-loong64目录多出了许多perl脚本，我们需要把这些脚本复制到龙架构的目录下，下面编译需要用到。
1 $ cp ./bin/linux-x86_64/*.pl ./bin/linux-loong64/ 编译 在EPICS-Qt安装中已经介绍过编译ACAI。这次是使用交叉编译方式，步骤略有不同。
1 2 3 4 5 6 7 8 9 10 11 12 13 cd ~/loongson/ git clone https://github.com/andrewstarritt/acai.git cd acai vi configure/RELEASE.local # 修改交叉编译的目标架构，和EPICS base中保持一致 # EPICS_HOST_ARCH=linux-loong64 # 修改EPICS_BASE路径，例： EPICS_BASE=/home/ubuntu/loongson/base-7.0.8 # make LD=loongarch64-linux-gnu-ld CC=loongarch64-linux-gnu-gcc CCC=loongarch64-linux-gnu-g++ make # 等待编译完成 编译完成后可以在lib/linux-loong64/目录下找到libacai.so。
...</p></div><footer class=entry-footer><span title='2023-12-26 19:31:56 +0800 +0800'>十二月 26, 2023</span>&nbsp;·&nbsp;1 分钟&nbsp;·&nbsp;67 字</footer><a class=entry-link aria-label="post link to 交叉编译 ACAI" href=https://kira-96.github.io/notes/cross-compiling-acai/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Windows上使用MinGW编译安装EPICS
<span class=entry-hint title=Draft><svg height="20" viewBox="0 -960 960 960" fill="currentcolor"><path d="M160-410v-60h3e2v60H160zm0-165v-60h470v60H160zm0-165v-60h470v60H160zm360 580v-123l221-220q9-9 20-13t22-4q12 0 23 4.5t20 13.5l37 37q9 9 13 20t4 22-4.5 22.5T862.09-380L643-160H520zm3e2-263-37-37 37 37zM580-220h38l121-122-18-19-19-18-122 121v38zm141-141-19-18 37 37-18-19z"/></svg></span></h2></header><div class=entry-content><p>需要使用的软件 Strawberry Perl for Windows EPICS Base 编译Base需要有gcc、g++、make、perl这些工具，但其实我们只需要安装Strawberry Perl就可以了，安装完成后就有了MinGW的编译环境，足够编译安装EPICS了。
这里使用MinGW环境编译EPICS，不使用MSVC编译器。
安装 Strawberry Perl 这里选择 Strawberry Perl 5.38.2.1。
直接安装即可，需要注意的是，安装路径不能有空格和中文，最好放在盘符的根目录下。
例：D:\Strawberry
安装完成后检查系统环境变量，查看系统Path环境变量是否有Strawberry Perl的路径。没有则手动添加，以安装在D盘为例。
1 2 3 D:\Strawberry\c\bin D:\Strawberry\perl\site\bin D:\Strawberry\perl\bin 其中D:\Strawberry\c\bin就是MinGW环境的路径。
查看Perl版本，检查一下是不是装好了。
1 2 3 4 5 6 7 8 9 10 11 12 > perl -v This is perl 5, version 38, subversion 2 (v5.38.2) built for MSWin32-x64-multi-thread Copyright 1987-2023, Larry Wall Perl may be copied only under the terms of either the Artistic License or the GNU General Public License, which may be found in the Perl 5 source kit. Complete documentation for Perl, including FAQ lists, should be found on this system using "man perl" or "perldoc perl". If you have access to the Internet, point your browser at https://www.perl.org/, the Perl Home Page. 注意：perl 5.32.1.1 之后的版本可能会提示
...</p></div><footer class=entry-footer><span title='2023-11-29 18:57:02 +0800 +0800'>十一月 29, 2023</span>&nbsp;·&nbsp;2 分钟&nbsp;·&nbsp;304 字</footer><a class=entry-link aria-label="post link to Windows上使用MinGW编译安装EPICS" href=https://kira-96.github.io/notes/windows%E4%B8%8A%E4%BD%BF%E7%94%A8mingw%E7%BC%96%E8%AF%91%E5%AE%89%E8%A3%85epics/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>weston桌面系统截屏方法
<span class=entry-hint title=Draft><svg height="20" viewBox="0 -960 960 960" fill="currentcolor"><path d="M160-410v-60h3e2v60H160zm0-165v-60h470v60H160zm0-165v-60h470v60H160zm360 580v-123l221-220q9-9 20-13t22-4q12 0 23 4.5t20 13.5l37 37q9 9 13 20t4 22-4.5 22.5T862.09-380L643-160H520zm3e2-263-37-37 37 37zM580-220h38l121-122-18-19-19-18-122 121v38zm141-141-19-18 37 37-18-19z"/></svg></span></h2></header><div class=entry-content><p>使用weston-screenshooter
但必须启用weston桌面--debug选项，否则会出现以下错误：
1 2 3 [root@RK356X:/]# weston-screenshooter [02:41:05.145] libwayland: error in client communication (pid 776) weston_screenshooter@5: error 0: screenshooter failed: permission denied. Debug protocol must be enabled 以RK3568开发板，buildroot系统为例，修改/etc/init.d/S50launcher，找到weston所在行，添加--debug选项。
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 ...... # Uncomment to disable mirror mode # unset WESTON_DRM_MIRROR export XDG_RUNTIME_DIR=${XDG_RUNTIME_DIR:-/var/run} export QT_QPA_PLATFORM=${QT_QPA_PLATFORM:-wayland} weston --tty=2 --debug --idle-time=0& { # Wait for weston ready while [ ! -e ${XDG_RUNTIME_DIR}/wayland-0 ]; do sleep .1 done /usr/bin/QLauncher & }& ...... forlinx开发板使用的yocto系统也类似，修改/lib/systemd/system/weston.service，在weston后添加--debug选项。
...</p></div><footer class=entry-footer><span title='2023-02-03 11:34:14 +0800 +0800'>二月 3, 2023</span>&nbsp;·&nbsp;1 分钟&nbsp;·&nbsp;100 字</footer><a class=entry-link aria-label="post link to weston桌面系统截屏方法" href=https://kira-96.github.io/notes/weston-screenshot/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Calculate Spacing Between Slices
<span class=entry-hint title=Draft><svg height="20" viewBox="0 -960 960 960" fill="currentcolor"><path d="M160-410v-60h3e2v60H160zm0-165v-60h470v60H160zm0-165v-60h470v60H160zm360 580v-123l221-220q9-9 20-13t22-4q12 0 23 4.5t20 13.5l37 37q9 9 13 20t4 22-4.5 22.5T862.09-380L643-160H520zm3e2-263-37-37 37 37zM580-220h38l121-122-18-19-19-18-122 121v38zm141-141-19-18 37 37-18-19z"/></svg></span></h2></header><div class=entry-content><p>计算切片间距的方法：
对于CT扫描出的断层图像，没有存储Spacing Between Slices信息，但可以利用位置信息计算得到。
需要先读取相邻两层切片的位置信息，假设为pos1和pos2，然后计算两个位置的距离即为切片间距。
...</p></div><footer class=entry-footer><span title='2021-04-30 10:26:13 +0800 +0800'>四月 30, 2021</span>&nbsp;·&nbsp;1 分钟&nbsp;·&nbsp;142 字</footer><a class=entry-link aria-label="post link to Calculate Spacing Between Slices" href=https://kira-96.github.io/notes/calculate-spacing-between-slices/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Running Dcm4chee Arc Light on Docker
<span class=entry-hint title=Draft><svg height="20" viewBox="0 -960 960 960" fill="currentcolor"><path d="M160-410v-60h3e2v60H160zm0-165v-60h470v60H160zm0-165v-60h470v60H160zm360 580v-123l221-220q9-9 20-13t22-4q12 0 23 4.5t20 13.5l37 37q9 9 13 20t4 22-4.5 22.5T862.09-380L643-160H520zm3e2-263-37-37 37 37zM580-220h38l121-122-18-19-19-18-122 121v38zm141-141-19-18 37 37-18-19z"/></svg></span></h2></header><div class=entry-content><p>首先需要安装Docker
安装完成后，拉取以下3个仓库
1 2 3 $ docker pull dcm4che/slapd-dcm4chee:2.4.56-23.1 $ docker pull dcm4che/postgres-dcm4chee:13.1-23 $ docker pull dcm4che/dcm4chee-arc-psql:5.23.1 拉取完成后，就可以启动服务了，这里有两种方式，一种是使用Docker命令行依次启动上面3个服务，不过比较麻烦，也容易出错，另一种是直接使用Docker Copmose，相对来说要简单很多。这里就直接使用 Docker Compose的方式。
...</p></div><footer class=entry-footer><span title='2021-02-03 09:26:58 +0800 +0800'>二月 3, 2021</span>&nbsp;·&nbsp;1 分钟&nbsp;·&nbsp;380 字</footer><a class=entry-link aria-label="post link to Running Dcm4chee Arc Light on Docker" href=https://kira-96.github.io/notes/running-dcm4chee-arc-light-on-docker/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>GDI+绘制旋转的椭圆
<span class=entry-hint title=Draft><svg height="20" viewBox="0 -960 960 960" fill="currentcolor"><path d="M160-410v-60h3e2v60H160zm0-165v-60h470v60H160zm0-165v-60h470v60H160zm360 580v-123l221-220q9-9 20-13t22-4q12 0 23 4.5t20 13.5l37 37q9 9 13 20t4 22-4.5 22.5T862.09-380L643-160H520zm3e2-263-37-37 37 37zM580-220h38l121-122-18-19-19-18-122 121v38zm141-141-19-18 37 37-18-19z"/></svg></span></h2></header><div class=entry-content><p>GDI+绘制椭圆时只支持输入一个矩形范围，无法绘制倾斜的椭圆。
绘制椭圆的 API：
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 // 摘要: 绘制边界 System.Drawing.RectangleF 定义的椭圆。 // 参数: // pen: System.Drawing.Pen，它确定曲线的颜色、宽度和样式。 // rect: System.Drawing.RectangleF 结构，它定义椭圆的边界。 // 异常: // T:System.ArgumentNullException: pen 为 null。 public void DrawEllipse(Pen pen, RectangleF rect); // // 摘要: 绘制一个由边框（该边框由一对坐标、高度和宽度指定）定义的椭圆。 // 参数: // pen: System.Drawing.Pen，它确定曲线的颜色、宽度和样式。 // x: 定义椭圆的边框的左上角的 X 坐标。 // y: 定义椭圆的边框的左上角的 Y 坐标。 // width: 定义椭圆的边框的宽度。 // height: 定义椭圆的边框的高度。 // 异常: // T:System.ArgumentNullException: pen 为 null。 public void DrawEllipse(Pen pen, float x, float y, float width, float height); // // 摘要: 绘制边界 System.Drawing.Rectangle 结构指定的椭圆。 // 参数: // pen: System.Drawing.Pen，它确定曲线的颜色、宽度和样式。 // rect: System.Drawing.Rectangle 结构，它定义椭圆的边界。 // 异常: // T:System.ArgumentNullException: pen 为 null。 public void DrawEllipse(Pen pen, Rectangle rect); // // 摘要: 绘制一个由边框定义的椭圆，该边框由矩形的左上角坐标、高度和宽度指定。 // 参数: // pen: System.Drawing.Pen，它确定曲线的颜色、宽度和样式。 // x: 定义椭圆的边框的左上角的 X 坐标。 // y: 定义椭圆的边框的左上角的 Y 坐标。 // width: 定义椭圆的边框的宽度。 // height: 定义椭圆的边框的高度。 // 异常: // T:System.ArgumentNullException: pen 为 null。 public void DrawEllipse(Pen pen, int x, int y, int width, int height); 可以看到，绘制椭圆的API，都只支持输入一个矩形区域，长和宽都只能是水平或者竖直的，因此，绘制出椭圆的长轴和短轴也是水平或竖直的，而无法绘制一个旋转过的椭圆，如下图：
...</p></div><footer class=entry-footer><span title='2021-01-21 16:23:42 +0800 +0800'>一月 21, 2021</span>&nbsp;·&nbsp;3 分钟&nbsp;·&nbsp;1429 字</footer><a class=entry-link aria-label="post link to GDI+绘制旋转的椭圆" href=https://kira-96.github.io/notes/draw-rotate-ellipse-with-gdi/></a></article><footer class=page-footer><nav class=pagination><a class=next href=https://kira-96.github.io/notes/page/2/>下一页&nbsp;&nbsp;»</a></nav></footer></main><footer class=footer><span>Copyright © 2019-2025 <a href=/>kira&rsquo;s blog</a> ·</span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>