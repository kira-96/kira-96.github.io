<!doctype html><html lang=zh dir=auto><head><meta name=generator content="Hugo 0.140.2"><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>✨kiraの博客</title>
<meta name=description content="kira's blog"><meta name=author content><link rel=canonical href=https://kira-96.github.io/><link crossorigin=anonymous href=/assets/css/stylesheet.dac4af848e4810dd3d01b9ed0579c423cc79a02d0566dcb481e47b0250cd237d.css integrity="sha256-2sSvhI5IEN09AbntBXnEI8x5oC0FZty0geR7AlDNI30=" rel="preload stylesheet" as=style><link rel=icon href=https://cdn.jsdelivr.net/gh/kira-96/kira-96.github.io@gh-pages/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://cdn.jsdelivr.net/gh/kira-96/kira-96.github.io@gh-pages/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://cdn.jsdelivr.net/gh/kira-96/kira-96.github.io@gh-pages/favicon-32x32.png><link rel=apple-touch-icon href=https://cdn.jsdelivr.net/gh/kira-96/kira-96.github.io@gh-pages/icons/apple-icon-180x180.png><link rel=mask-icon href=https://cdn.jsdelivr.net/gh/kira-96/kira-96.github.io@gh-pages/icons/apple-icon-76x76.png><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://kira-96.github.io/index.xml><link rel=alternate type=application/json href=https://kira-96.github.io/index.json><link rel=alternate hreflang=zh href=https://kira-96.github.io/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><link rel=manifest href=https://cdn.jsdelivr.net/gh/kira-96/kira-96.github.io@gh-pages/manifest.json><script src=https://fastly.jsdelivr.net/gh/stevenjoezhang/live2d-widget@latest/autoload.js></script><script type=text/javascript src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><meta property="og:url" content="https://kira-96.github.io/"><meta property="og:site_name" content="✨kiraの博客"><meta property="og:title" content="✨kiraの博客"><meta property="og:description" content="kira's blog"><meta property="og:locale" content="zh"><meta property="og:type" content="website"><meta name=twitter:card content="summary"><meta name=twitter:title content="✨kiraの博客"><meta name=twitter:description content="kira's blog"><script type=application/ld+json>{"@context":"https://schema.org","@type":"Organization","name":"✨kiraの博客","url":"https://kira-96.github.io/","description":"kira's blog","logo":"https://cdn.jsdelivr.net/gh/kira-96/kira-96.github.io@gh-pages/favicon.ico","sameAs":["https://github.com/kira-96/","https://space.bilibili.com/9258847","index.xml"]}</script></head><body class=list id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://kira-96.github.io/ accesskey=h title="✨kiraの博客 (Alt + H)">✨kiraの博客</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://kira-96.github.io/ title=🏠主页><span class=active>🏠主页</span></a></li><li><a href=https://kira-96.github.io/notes/ title=📓笔记><span>📓笔记</span></a></li><li><a href=https://kira-96.github.io/search/ title=🔍️搜索><span>🔍️搜索</span></a></li><li><a href=https://kira-96.github.io/archives/ title=🗃️存档><span>🗃️存档</span></a></li></ul></nav></header><main class=main><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>龙芯3A5000(LoongArch64)上编译运行EPICS</h2></header><div class=entry-content><p>前言 之前尝试过在龙芯3A4000上编译运行EPICS，由于3A4000还是mips64指令集，而3A5000则是龙芯的自主指令集loongarch64，适配起来步骤也会有所不同。
这次使用的是龙博特龙芯3A5000电脑主机。
虽然EPICS官方并没有适配loongarch和mips64，无法做到开箱即用，但只要有gcc、g++、make、perl这些工具，理论上就能编译运行EPICS，在开始编译前，确保你的设备上已经装好了这些工具。
关于如何称呼「龙架构」，龙芯社区也有一些讨论。最初我直接使用loongarch64，后来也使用过la64作为简写，直到我看到如何称呼龙架构？，我觉得有必要和社区保持一致，后续统一使用 loong64 作为架构标识。
下载 base 这里我们就以目前最新版本7.0.7为例，其它版本的Base也类似。
1 2 3 $ cd ~/下载/ $ wget https://epics.anl.gov/download/base/base-7.0.7.tar.gz $ tar -xzvf base-7.0.7.tar.gz 你可以在你觉得合适的位置编译安装Base，这里按我们的习惯，放在/usr/local/epics目录下。
1 2 $ mkdir /usr/local/epics $ mv base-7.0.7 /usr/local/epics/ 编译 按照一般步骤，现在就可以开始编译了，我们可以先尝试一下，看看是什么结果。
1 2 3 $ cd /usr/local/epics/base-7.0.7/ # 执行 `make` 命令 $ make 不出所料，果然失败了，输出的错误和在3A4000上编译时的错误也有一些不同。
下面是在3A4000上编译时输出的错误：
下面一行报错是差不多的，在loongarch64上编译却多了上面一行报错，意思就是没有识别出loongarch64架构。
但是先不要慌，这里同时也给出了报错的位置，让我们看看EpicsHostArch.pl里写了些什么。
1 $ vi ./src/tools/EpicsHostArch.pl 它其实就是一个perl脚本，用来判断当前的系统和cpu架构，而loongarch64显然没有做适配，所以就出现了上面错误。
“Architecture ’loongarch64-linux-gnu-thread-multi’ not recognized”
既然识别不了loongarch64，那我们就手动添加一行，让它可以识别就行了，即使看不太懂上面的脚本也没关系，看个半懂就行了。
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 sub HostArch { my $arch = $Config{archname}; for ($arch) { return 'linux-x86_64' if m/^x86_64-linux/; return 'linux-x86' if m/^i[3-6]86-linux/; return 'linux-arm' if m/^arm-linux/; return 'linux-aarch64' if m/^aarch64-linux/; return 'linux-ppc64' if m/^powerpc64-linux/; return 'linux-loong64' if m/^loongarch64-linux/; return 'windows-x64' if m/^MSWin32-x64/; return 'win32-x86' if m/^MSWin32-x86/; return "cygwin-x86_64" if m/^x86_64-cygwin/; return "cygwin-x86" if m/^i[3-6]86-cygwin/; return 'solaris-sparc' if m/^sun4-solaris/; return 'solaris-x86' if m/^i86pc-solaris/; my ($kernel, $hostname, $release, $version, $cpu) = uname; if (m/^darwin/) { for ($cpu) { return 'darwin-x86' if m/^x86_64/; return 'darwin-aarch64' if m/^arm64/; } die "$0: macOS CPU type '$cpu' not recognized\n"; } die "$0: Architecture '$arch' not recognized\n"; } } 我们在上面位置添加一行内容，来让它可以识别loongarch64架构。
...</p></div><footer class=entry-footer><span title='2023-02-01 15:51:40 +0800 +0800'>二月 1, 2023</span>&nbsp;·&nbsp;5 分钟&nbsp;·&nbsp;987 字</footer><a class=entry-link aria-label="post link to 龙芯3A5000(LoongArch64)上编译运行EPICS" href=https://kira-96.github.io/posts/%E9%BE%99%E8%8A%AF3a5000loongarch64%E4%B8%8A%E7%BC%96%E8%AF%91%E8%BF%90%E8%A1%8Cepics/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Linux GPIO 操作其一</h2></header><div class=entry-content><p>前言 由于换了新的工作，我的工作方向也有了很大的变化，之前基本上是单纯的写代码，现在则经常需要和硬件设备交互，开发平台也转到了Linux+Qt。硬件设备的控制，其中最基本的就是LED灯以及一些开关继电器的操作，其本质就是GPIO的操作。考虑到系统的精简和成本控制，最好是可以直接通过Linux系统去控制，当然也有其它替代方案，比如使用支持Modbus协议的IO模块。关于Modbus的使用，后面有空再讲，这里就记录一下最简单的Linux系统下的GPIO控制，用户空间下的GPIO文件系统接口。
在此之前，有必要再了解一下GPIO的概念。
“通用输入/输出”（GPIO）是一种灵活的软件控制数字信号。它们由多种芯片提供，对于使用嵌入式和定制硬件的Linux开发人员来说很熟悉。每个GPIO代表一个连接到特定引脚的位，即球栅阵列（BGA）封装上的“球”。电路板示意图显示了哪些外部硬件连接到哪些GPIO。驱动程序可以通用地编写，以便板设置代码将这样的引脚配置数据传递给驱动程序。
A “General Purpose Input/Output” (GPIO) is a flexible software-controlled digital signal. They are provided from many kinds of chip, and are familiar to Linux developers working with embedded and custom hardware. Each GPIO represents a bit connected to a particular pin, or “ball” on Ball Grid Array (BGA) packages. Board schematics show which external hardware connects to which GPIOs. Drivers can be written generically, so that board setup code passes such pin configuration data to drivers.
...</p></div><footer class=entry-footer><span title='2023-01-12 13:33:37 +0800 +0800'>一月 12, 2023</span>&nbsp;·&nbsp;3 分钟&nbsp;·&nbsp;498 字</footer><a class=entry-link aria-label="post link to Linux GPIO 操作其一" href=https://kira-96.github.io/posts/linux-gpio%E6%93%8D%E4%BD%9C%E5%85%B6%E4%B8%80/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>WSL libcuda.so.1 is not a symbolic link 的解决方法</h2></header><div class=entry-content><p>问题描述 在使用 WSL 更新软件包的时候经常会遇到这样一个报错
1 /sbin/ldconfig.real: /usr/lib/wsl/lib/libcuda.so.1 is not a symbolic link 意思是说 /usr/lib/wsl/lib/libcuda.so.1 不是一个符号链接。
问题分析 通过名字可以判断这应该是nVidia显卡驱动相关的库，进入 /usr/lib/wsl/lib/ 目录，可以看到有 libcuda.so、libcuda.so.1、libcuda.so.1.1 三个文件，都是文件形式，而通过报错我们知道 libcuda.so、libcuda.so.1 应该是符号链接文件。
...</p></div><footer class=entry-footer><span title='2022-02-09 08:48:30 +0800 +0800'>二月 9, 2022</span>&nbsp;·&nbsp;1 分钟&nbsp;·&nbsp;422 字</footer><a class=entry-link aria-label="post link to WSL libcuda.so.1 is not a symbolic link 的解决方法" href=https://kira-96.github.io/posts/wsl-libcuda.so.1-is-not-a-symbolic-link-%E7%9A%84%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>交叉编译适用于 iMX6UL 的 x11vnc</h2></header><div class=entry-content><p>前言 由于这半年来一直在做嵌入式Linux系统软件开发工作，所以经常和嵌入式设备打交道，最早接触的嵌入式Linux应该就是树莓派了，而我的树莓派一般也不接屏幕，基本上都使用VNC远程连接，所以就想着能不能把VNC也移植到嵌入式设备上，最后找到了x11vnc。
...</p></div><footer class=entry-footer><span title='2022-02-06 11:06:12 +0800 +0800'>二月 6, 2022</span>&nbsp;·&nbsp;3 分钟&nbsp;·&nbsp;1029 字</footer><a class=entry-link aria-label="post link to 交叉编译适用于 iMX6UL 的 x11vnc" href=https://kira-96.github.io/posts/%E4%BA%A4%E5%8F%89%E7%BC%96%E8%AF%91%E9%80%82%E7%94%A8%E4%BA%8E-imx6ul-%E7%9A%84-x11vnc/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>开始一份新工作</h2></header><div class=entry-content><p>开始一份新工作 好久没有更新博客了，最近几个月都在忙新工作的事情，虽然只是短短3个月，但回想起来已经是很久之前了。从4月份面试，然后体检，提交各种材料证明，到5月份工作交接，6月份正式离职进入新单位，搬家等等，这几个月真是忙的有点喘不过气。即使到了新的单位，也没有闲下来的时间，来了之后就要上手做项目，到这周为止，项目总算初步完成，这才有时间来自我整理一下。即使5月份买了PS5游戏机也没怎么有时间玩，没什么游戏是一方面，忙也是一方面。
...</p></div><footer class=entry-footer><span title='2021-07-11 11:14:52 +0800 +0800'>七月 11, 2021</span>&nbsp;·&nbsp;3 分钟&nbsp;·&nbsp;1315 字</footer><a class=entry-link aria-label="post link to 开始一份新工作" href=https://kira-96.github.io/posts/%E5%BC%80%E5%A7%8B%E4%B8%80%E4%BB%BD%E6%96%B0%E5%B7%A5%E4%BD%9C/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>在 Windows 上编译 MITK</h2></header><div class=entry-content><p>前言 The Medical Imaging Interaction Toolkit (MITK)是一个免费的开源软件，用于开发交互式医学影像处理软件。最近突然安排我做相关的一些工作，首先就要从编译开始，当然官网也有编译好的版本，可以直接下载使用。本来在Windows上编译这种开源的软件就很麻烦，在加上github上的东西下载巨慢，常常出错，折腾了好久才编译完成，这里就记录一下踩过的那些坑。
...</p></div><footer class=entry-footer><span title='2021-03-29 09:54:57 +0800 +0800'>三月 29, 2021</span>&nbsp;·&nbsp;4 分钟&nbsp;·&nbsp;1559 字</footer><a class=entry-link aria-label="post link to 在 Windows 上编译 MITK" href=https://kira-96.github.io/posts/build-mitk-on-windows/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Gitea 安装使用</h2></header><div class=entry-content><p>前言 今天偶然看到一个新的开源的git服务软件Gitea，一看到界面，瞬间就爱了，因为之前我自己用的是gitblit，界面比较简单，主要是用来管理公司的一些小项目。今天看到Gitea之后，就决定迁移到过去，简单折腾了一下，配置起来比gitblit要简单一些，但界面却更加漂亮了，总体上看起来比较像github，并且还支持主题系统，很合我的胃口。
下载二进制包 首先去下载对应系统的二进制包，可以去github或者官网下载最新的发布版本。
我是在windows下配置的，所以选择下载windows版的可执行程序。
...</p></div><footer class=entry-footer><span title='2021-03-22 10:07:35 +0800 +0800'>三月 22, 2021</span>&nbsp;·&nbsp;3 分钟&nbsp;·&nbsp;1076 字</footer><a class=entry-link aria-label="post link to Gitea 安装使用" href=https://kira-96.github.io/posts/install-gitea/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>一些常用的git命令</h2></header><div class=entry-content><p>说明 这里是个人工作时常用的一些git命令，现在越来越多了，小本本都快记不下了，这里稍微做一下整理。
工具下载 首先是git的下载地址：
官网：https://git-scm.com/ taobao镜像：https://npm.taobao.org/mirrors/git-for-windows/ 由于官网的下载速度很慢，推荐使用taobao镜像的下载地址。
...</p></div><footer class=entry-footer><span title='2020-11-26 09:45:36 +0800 +0800'>十一月 26, 2020</span>&nbsp;·&nbsp;3 分钟&nbsp;·&nbsp;1227 字</footer><a class=entry-link aria-label="post link to 一些常用的git命令" href=https://kira-96.github.io/posts/%E4%B8%80%E4%BA%9B%E5%B8%B8%E7%94%A8%E7%9A%84git%E5%91%BD%E4%BB%A4/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Inno Setup 简体中文语言包</h2></header><div class=entry-content><p>食用方法 Step 1
将ChineseSimplified.isl放到Inno Setup安装目录下的"Languages"文件夹里面
...</p></div><footer class=entry-footer><span title='2020-10-16 12:00:00 +0800 +0800'>十月 16, 2020</span>&nbsp;·&nbsp;1 分钟&nbsp;·&nbsp;265 字</footer><a class=entry-link aria-label="post link to Inno Setup 简体中文语言包" href=https://kira-96.github.io/Inno-Setup-Chinese-Simplified-Translation/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Prism note</h2></header><div class=entry-content><p>简介 Prism是一个用于WPF、Xamarin Forms、WinUI等的MVVM框架，刚刚学习，这里只是个人总结的一些知识点笔记。
IoC IContainerProvider
1 2 3 4 protected override Window CreateShell() { return Container.Resolve&lt;MainWindow>(); } 1 2 3 4 5 6 public void OnInitialized(IContainerProvider containerProvider) { var regionManager = containerProvider.Resolve&lt;IRegionManager>(); var viewA = containerProvider.Resolve&lt;ViewA>(); ... } IContainerRegistry
1 2 3 4 5 6 7 8 9 // App.xaml.cs protected override void RegisterTypes(IContainerRegistry containerRegistry) { containerRegistry.Register&lt;IApplicationCommands, ApplicationCommands>(); containerRegistry.RegisterDialog&lt;NotificationDialog, NotificationDialogViewModel>(); containerRegistry.RegisterForNavigation&lt;Page1>(); containerRegistry.RegisterForNavigation&lt;Page2>(); ... } Module IModule
...</p></div><footer class=entry-footer><span title='2020-09-04 09:10:00 +0800 +0800'>九月 4, 2020</span>&nbsp;·&nbsp;3 分钟&nbsp;·&nbsp;1338 字</footer><a class=entry-link aria-label="post link to Prism note" href=https://kira-96.github.io/posts/prism-note/></a></article><footer class=page-footer><nav class=pagination><a class=prev href=https://kira-96.github.io/>«&nbsp;上一页&nbsp;
</a><a class=next href=https://kira-96.github.io/page/3/>下一页&nbsp;&nbsp;»</a></nav></footer></main><footer class=footer><span>Copyright © 2019-2024 <a href=/>kira&rsquo;s blog</a> ·</span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>